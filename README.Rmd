---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# ambiR <a href="https://niva-denmark.github.io/ambiR/"><img src="man/figures/logo.png" align="right" height="139" alt="ambiR website" /></a>

<!-- badges: start -->
[![R-CMD-check](https://github.com/NIVA-Denmark/ambiR/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/NIVA-Denmark/ambiR/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

Implementing **AZTI’s Marine Biotic Index** [(Borja et al., 2000)](\doi{10.1016/S0025-326X(00)00061-8})

## Overview

The ambiR package allows the user to calculate both the *AMBI* index and the
multivariate *M-AMBI* from count or abundance data for benthic fauna species, 
using the included species list.

In addition, this package includes functions to calculate different
versions of the *Danish Quality Index* (*DKI*) (*Dansk
Kvalitetsindeks*), a derived benthic index based on AMBI.

-   `AMBI()` - calculates the *AMBI* index.
-   `MAMBI()` - calculates the multivariate *M-AMBI* index.
-   `Hdash()` - calculates *H'*, the Shannon diversity index.
-   `DKI2()` - calculates the salinity-normalised Danish quality index
    *DKI (v2)*.
-   `DKI()` - calculates the Danish quality index *DKI*.

To get started, see `vignette("ambiR")`. For details about running in 
interactive mode, see `vignette("interactive")`.

The AMBI index was developed by Ángel Borja and colleagues at AZTI. For 
background and explanation of the method for calculation of the AMBI index 
see `vignette("background")`. You can also find a link to download the 
original AMBI software.

## Installation

You can install the development version of ambiR from
[GitHub](https://github.com/niva-denmark/ambiR/) with:

```{r install, eval = FALSE}
# install.packages("devtools")
devtools::install_github("NIVA-Denmark/ambiR")
```

## Examples

This is a basic example using a very small dataset, with 2 stations. In each station there are 3 species counts.
The data is organised in a dataframe with 3 columns in a so-called "long" format. That is, each count is recorded in a separate row.

By default, the `AMBI` function returns both the AMBI results _and_ a list of which AMBI groups species names in input data were assigned to. Here, we also use the argument `format_pct` to show the estimated fractions as percentages. See the function documentation for more details: `AMBI()`.

```{r example}
library(ambiR)

df <- data.frame(station = c("1","1","1","2","2","2"),
                 species = c("Acidostoma neglectum",
                             "Acrocirrus validus",
                             "Capitella nonatoi",
                             "Acteocina bullata",
                             "Austrohelice crassa",
                             "Capitella nonatoi"),
                 count = c(8, 14, 23, 13, 17, 11))

AMBI(df, by = c("station"), format_pct=1)
```

Another example using the supplied `test_data`.

```{r example2}
library(ambiR)

## calling AMBI using the test data set
AMBI(test_data, by=c("station"), var_rep = "replicate", format_pct=1)
```

## Acknowledgments

The ambiR logo was designed by Steen Knudsen [](https://orcid.org/0000-0003-0428-9940){.fa-orcid .fab .orcid}  

Development work on the ambiR package is funded in part by the GES4SEAS project.

![](man/figures/Co-Funded-by-the-EU.png){.fundingtext} 
![](man/figures/UKRI20logo-300x88.png){.fundingtext}

[Grant Agreement 101059877 - GES4SEAS]{.fundingtext}  

[The GES4SEAS project has been approved under the HORIZON-CL6-2021-BIODIV-01-04 call: _'Assess and predict integrated impacts of cumulative direct and indirect stressors on coastal and marine biodiversity, ecosystems and their services'_.]{.fundingtext}  

[Funded by the European Union. Views and opinions expressed are however those of the authors only and do not necessarily reflect those of the European Union or UK Research and Innovation. Neither the European Union nor the granting authority can be held responsible for them.]{.fundingtext}  
