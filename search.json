[{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement cjm niva-dk.dk. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to ambiR","title":"Contributing to ambiR","text":"can contribute ambiR. authors happy receive forms feedback can maintain improve package.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to ambiR","text":"participating, contributing , commenting ambiR project, agree abide code conduct.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CONTRIBUTING.html","id":"corrections-to-species-list","dir":"","previous_headings":"","what":"Corrections to species list","title":"Contributing to ambiR","text":"concerns errors species lists. Examples include misspelling species name allocation species incorrect AMBI group. find issue, ? preferred place register issue ambiR GitHub repository. first check issue already raised someone else. https://github.com/NIVA-Denmark/ambiR/issues?q=label:“Species%20data” need registered GitHub user view existing issues. want submit new issue, need register user. Please remember apply Species data label submitting issue. want register GitHub, please contact aborja azti.es cjm niva.dk. , please check first problem already noted. Corrections gathered used update future versions species list. Remember , waiting updated versions, free use user-defined species lists, including corrections deem necessary. GitHub user, can also use issue functionality record issues.","code":""},{"path":"https://niva-denmark.github.io/ambiR/CONTRIBUTING.html","id":"bugs","dir":"","previous_headings":"","what":"Bugs","title":"Contributing to ambiR","text":"*…- instructions pull requests etc. https://github.com/niva-denmark/ambiR/issues","code":""},{"path":"https://niva-denmark.github.io/ambiR/CONTRIBUTING.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Contributing to ambiR","text":"…","code":""},{"path":"https://niva-denmark.github.io/ambiR/CONTRIBUTING.html","id":"feature-requests","dir":"","previous_headings":"","what":"Feature requests","title":"Contributing to ambiR","text":"…","code":""},{"path":"https://niva-denmark.github.io/ambiR/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 ambiR authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://niva-denmark.github.io/ambiR/articles/ambi-figures.html","id":"bar-chart-from-original-ambi-software","dir":"Articles","previous_headings":"","what":"Bar chart from original AMBI software","title":"AMBI figures","text":"One type figure AMBI software generates stacked bar chart showing composition samples belonging groups , II, III, IV V station/replicate. fractional composition (0-100%) read primary (left) y-axis. Overlaying bar chart points indicating resulting AMBI score (0-6) read secondary y-axis.","code":""},{"path":"https://niva-denmark.github.io/ambiR/articles/ambi-figures.html","id":"bar-chart-using-ggplot","dir":"Articles","previous_headings":"","what":"Bar chart using ggplot","title":"AMBI figures","text":"Using test data set included package, generate AMBI index results plotted. first take dataframe results replicates AMBI_rep. includes 5 columns fractions total number individuals belonging group. transpose long format. convert group variable factor groups arranged order want, rather alphabetical order. Plotting stacked bars relatively straightforward. also need add points indicating resulting AMBI score (0-6) secondary y-axis. described ggplot2::sec_axis(), secondary axis specified using absolute values specifying transformation values primary axis. case, primary axis scaled 0.0 1.0 (0% 100%) want secondary y-axis scaled 0 6. achieved multiplying 6 (transform =~.*6). , secondary y-axis scaled 0 6. variables plotted axis undergo transformation, must rescaled primary scale (0-1) plotting. geom_point specify y=(AMBI/6). can now create first version figure includes required features uses default formatting.","code":"library(ambiR) library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union library(tidyr) library(ggplot2)  res <- AMBI(test_data, by=c(\"station\"), var_rep = \"replicate\") df <- res$AMBI_rep  df_group_freq <- df %>%   pivot_longer(cols=c(\"I\",\"II\",\"III\",\"IV\",\"V\"),                names_to = \"EcoGroup\",                values_to = \"f\")  df_group_freq$EcoGroup <- factor(df_group_freq$EcoGroup,                             levels = c(\"V\",\"IV\",\"III\",\"II\",\"I\")) p <- ggplot() +   geom_bar(data=df_group_freq,         aes(x=replicate, y=f, fill=EcoGroup),        position = \"fill\", stat=\"identity\", width=0.4) +   geom_point(data=df, aes(x=replicate, y=(AMBI/6))) +   scale_y_continuous(     limits = c(0,1),      name= \"Species group distribution\",     expand = c(0,0),      breaks = seq(0,1,0.25),     labels = scales::label_percent(),     sec.axis = sec_axis( transform =~.*6, name=\"AMBI\")) +   facet_grid(.~station, switch=\"x\", scales=\"free_x\",space=\"free\")   p"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambi-figures.html","id":"bar-chart-with-ambi-theme","dir":"Articles","previous_headings":"","what":"Bar chart with AMBI theme","title":"AMBI figures","text":"applying correct fill colours bars using ggplot2::theme(), can modify figure give similar feel figures produced original AMBI software.  still small differences compared original. example: colour transparency - alpha=0.6 argument ggplot2::geom_bar() causes bar colours slightly transparent. deliberate. solid colours, remove argument. legend text - names Ecological Groups appear respective colour keys original figure. appear next . Challenge: can reproduce original style legend keys? Starting example, modifications needed replicate variations AMBI figures. example, showing subsets stations replicates creating figures showing station results without replicates.","code":"p <- ggplot() +   geom_bar(data=df_group_freq,            aes(x=replicate, y=f, fill=EcoGroup),             colour=alpha(\"grey20\",1), position = \"fill\", stat=\"identity\",             width=0.6, linewidth = 0.1, alpha=0.6) +   geom_point(data=df, aes(x=replicate, y=(AMBI/6))) +   scale_fill_manual(values=c(\"#ff0000\",\"#ff8000\",\"#ffff00\",\"#00ff00\",\"#0000ff\"),                     name=\"Ecological Group\") +   facet_grid(.~station, switch=\"x\", scales=\"free_x\",space=\"free\") +   scale_y_continuous(     limits = c(0,1),     name= \"Species group distribution\",     expand = c(0,0),     breaks = seq(0,1,0.25),     labels = scales::label_percent(),     sec.axis = sec_axis( transform =~.*6, name=\"AMBI\")) +   theme(text = element_text(size=9),         strip.text.x.bottom = element_text(colour=\"grey20\"),         strip.placement = \"outside\",         strip.background = element_blank(),         panel.spacing.x = unit(0.5, units=\"cm\"),         panel.border = element_blank(),         panel.background = element_blank(),         panel.grid.major.x = element_blank(),         panel.grid.minor.x = element_blank(),         panel.grid.major.y =  element_blank(),         panel.grid.minor.y = element_blank(),         axis.line.x = element_line(colour=\"grey20\", linewidth = 0.2),         axis.line.y = element_line(colour=\"grey20\", linewidth = 0.2),         axis.title.x = element_blank(),         axis.text.x.bottom = element_text(size=8),         plot.background = element_blank(),         legend.position = \"bottom\") +   guides(fill = guide_legend(reverse=T)) p"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"structuring-species-observation-data","dir":"Articles","previous_headings":"","what":"Structuring species observation data","title":"Get started","text":"Species counts (abundance) organized data frame arranged long format. , species names one column species counts another column. data represents several stations /replicates, data include columns information. Looking test_data example dataset included ambiR package, one can see data arranged: data look like , can go directly Calculate AMBI. , following examples show reorganize data.","code":"library(ambiR)  head(test_data) #> # A tibble: 6 × 4 #>   station replicate species             count #>     <dbl> <chr>     <chr>               <dbl> #> 1       1 a         Cumopsis fagei          2 #> 2       1 a         Diogenes pugilator      2 #> 3       1 a         Paradoneis armata       1 #> 4       1 b         Bathyporeia elegans     1 #> 5       1 b         Diogenes pugilator      5 #> 6       1 b         Dispio uncinata         1"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"data-with-species-names-in-columns","dir":"Articles","previous_headings":"Structuring species observation data","what":"Species names in columns","title":"Get started","text":"example dataframe counts species separate columns: arrange data correct form, use tidyr::pivot_longer():","code":"head(wide_data_species) #> # A tibble: 6 × 36 #>   station replicate `Cumopsis fagei` `Diogenes pugilator` `Paradoneis armata` #>     <dbl> <chr>                <dbl>                <dbl>               <dbl> #> 1       1 a                        2                    2                   1 #> 2       1 b                        0                    5                   0 #> 3       1 c                        0                    3                   0 #> 4       2 a                        1                    0                   0 #> 5       2 b                        1                    0                   0 #> 6       2 c                        0                    0                   0 #> # ℹ 31 more variables: `Bathyporeia elegans` <dbl>, `Dispio uncinata` <dbl>, #> #   `Astarte sp.` <dbl>, `Glycera tridactyla` <dbl>, #> #   `Heteromastus filiformis` <dbl>, `Lekanesphaera hookeri` <dbl>, #> #   `Melita palmata` <dbl>, `Nassarius reticulatus` <dbl>, Nemertea <dbl>, #> #   `Prionospio fallax` <dbl>, `Scolaricia sp.` <dbl>, #> #   `Spio martinensis` <dbl>, `Tapes decussatus` <dbl>, `Tellina sp.` <dbl>, #> #   `Lekanesphaera rugicauda` <dbl>, `Lepidochitona cinerea` <dbl>, … # columns 1 and 2 contain station and replicate information # so, select all columns from 3 to be pivoted   long_data <- wide_data_species %>%   pivot_longer(cols = 3:ncol(wide_data_species),                 names_to = \"species\",                values_to = \"count\")  head(long_data) #> # A tibble: 6 × 4 #>   station replicate species             count #>     <dbl> <chr>     <chr>               <dbl> #> 1       1 a         Cumopsis fagei          2 #> 2       1 a         Diogenes pugilator      2 #> 3       1 a         Paradoneis armata       1 #> 4       1 a         Bathyporeia elegans     0 #> 5       1 a         Dispio uncinata         0 #> 6       1 a         Astarte sp.             0"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"stations-and-replicates-in-columns","dir":"Articles","previous_headings":"Structuring species observation data","what":"Stations and replicates in columns","title":"Get started","text":"example column contains species counts station replicate. first row table contains station ID 1, 2, … second row contains replicate ID , b, …. first column table contains species names. Note observation data stations replicates, rearranging data can done one step, previous example. case, station replicate information separate rows. restructuring process little complicated.","code":"head(wide_data_stns) #>                                       #> 1                <NA> 1 1 1 2 2 2 3 3 #> 2                <NA> a b c a b c a b #> 3      Cumopsis fagei 2 0 0 1 1 0 0 0 #> 4  Diogenes pugilator 2 5 3 0 0 0 0 0 #> 5   Paradoneis armata 1 0 0 0 0 0 0 0 #> 6 Bathyporeia elegans 0 1 0 0 0 0 0 0"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"combine-station-and-replicate-values","dir":"Articles","previous_headings":"Structuring species observation data > Stations and replicates in columns","what":"Combine station and replicate values","title":"Get started","text":"can use pivot function, need combine station ID replicate ID column single value. example, station ID replicate ID joined single character value, underscore separate _. underscore used pivoting table identify split combined station/replicate values back separate values . station names already contain underscores, another suitable character used joining splitting station/replicate IDs.","code":"sep_character <- \"_\"  # get the station IDs from row 1, excluding column 1 (this contains species names) stations <- wide_data_stns[1, 2:ncol(wide_data_stns)]  # get the replicate IDs from row 2 replicates <- wide_data_stns[2, 2:ncol(wide_data_stns)]  # combine the station and replicate for each column using an underscore station_replicate <- paste(stations, replicates, sep=sep_character)  # now we have extracted the station/replicate information, we can drop the  # first two rows of the data frame wide_data_stns <- wide_data_stns[3:nrow(wide_data_stns),]  # apply the station_replicates as column names names(wide_data_stns) <- c(\"species\", station_replicate)  head(wide_data_stns) #>               species 1_a 1_b 1_c 2_a 2_b 2_c 3_a 3_b #> 3      Cumopsis fagei   2   0   0   1   1   0   0   0 #> 4  Diogenes pugilator   2   5   3   0   0   0   0   0 #> 5   Paradoneis armata   1   0   0   0   0   0   0   0 #> 6 Bathyporeia elegans   0   1   0   0   0   0   0   0 #> 7     Dispio uncinata   0   1   0   0   0   0   0   0 #> 8         Astarte sp.   0   0   1   0   0   0   0   0"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"transpose-using-the-combined-stationreplicate-variable","dir":"Articles","previous_headings":"Structuring species observation data > Stations and replicates in columns","what":"Transpose using the combined station/replicate variable","title":"Get started","text":"can see column names now contain combined station replicate information. ready transpose data.","code":"# column 1 contains species names # so, select all columns from 2 to be pivoted   long_data <- wide_data_stns %>%   pivot_longer(cols = 2:ncol(wide_data_stns),                 names_to = \"stn_rep\",                values_to = \"count\")  head(long_data) #> # A tibble: 6 × 3 #>   species        stn_rep count #>   <chr>          <chr>   <chr> #> 1 Cumopsis fagei 1_a     2     #> 2 Cumopsis fagei 1_b     0     #> 3 Cumopsis fagei 1_c     0     #> 4 Cumopsis fagei 2_a     1     #> 5 Cumopsis fagei 2_b     1     #> 6 Cumopsis fagei 2_c     0"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"retrieve-station-and-replicate-variables-from-the-transposed-data","dir":"Articles","previous_headings":"Structuring species observation data > Stations and replicates in columns","what":"Retrieve station and replicate variables from the transposed data","title":"Get started","text":"Now can split stn_rep column separate columns station replicate, use underscore introduced earlier indentify split occur: Now ready calculate AMBI…","code":"long_data <- long_data %>%   separate_wider_delim(cols=\"stn_rep\",                         delim = sep_character,                        names=c(\"station\", \"replicate\"))  head(long_data) #> # A tibble: 6 × 4 #>   species        station replicate count #>   <chr>          <chr>   <chr>     <chr> #> 1 Cumopsis fagei 1       a         2     #> 2 Cumopsis fagei 1       b         0     #> 3 Cumopsis fagei 1       c         0     #> 4 Cumopsis fagei 2       a         1     #> 5 Cumopsis fagei 2       b         1     #> 6 Cumopsis fagei 2       c         0"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"calculate-ambi","dir":"Articles","previous_headings":"","what":"Calculate AMBI","title":"Get started","text":"now ensured species abundance/count data correct structure, example test_data provided: Call AMBI() function:","code":"head(test_data) #> # A tibble: 6 × 4 #>   station replicate species             count #>     <dbl> <chr>     <chr>               <dbl> #> 1       1 a         Cumopsis fagei          2 #> 2       1 a         Diogenes pugilator      2 #> 3       1 a         Paradoneis armata       1 #> 4       1 b         Bathyporeia elegans     1 #> 5       1 b         Diogenes pugilator      5 #> 6       1 b         Dispio uncinata         1 res <- AMBI(test_data, by=\"station\", var_rep=\"replicate\",              var_species=\"species\", var_count=\"count\")"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"results","dir":"Articles","previous_headings":"Calculate AMBI","what":"Results","title":"Get started","text":"AMBI() function returns list three dataframes: .$AMBI .$AMBI_rep .$matched .$AMBI- main results AMBI index calculated unique combination variables, case results per station. addition AMBI index, results also include Shannon diversity index H' Species richness S, three metrics necessary calculate M-AMBI. .$AMBI_rep - observations include replicates, function also returns results calculated replicate, within unique combination variables: .$matched - observation, dataframe shows species AMBI list observed species matched , . also shows AMBI species group assigned. dataframe number rows input data. information principles underlying AMBI calculations grouping species according sensitivity pollution, see AMBI","code":"res$AMBI #> # A tibble: 3 × 13 #>   station  AMBI AMBI_SD     H     S   fNA     N     I    II   III     IV      V #>     <dbl> <dbl>   <dbl> <dbl> <int> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1       1  1.48   0.338  1.80     6     0    16 0.125 0.75  0.125 0      0      #> 2       2  1.89   0.238  3.54    22     0    80 0.4   0.138 0.3   0.15   0.0125 #> 3       3  4.12   0.884  2.50     9     0    24 0     0.125 0.292 0.0833 0.5    #> # ℹ 1 more variable: Disturbance <chr> res$AMBI_rep #> # A tibble: 8 × 11 #>   station replicate  AMBI     S   fNA     N     I     II   III    IV      V #>     <dbl> <chr>     <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl> <dbl> <dbl>  <dbl> #> 1       1 a          1.8      3     0     5 0     0.8    0.2   0     0      #> 2       1 b          1.5      3     0     7 0.143 0.714  0.143 0     0      #> 3       1 c          1.12     2     0     4 0.25  0.75   0     0     0      #> 4       2 a          1.88    12     0    32 0.406 0.156  0.219 0.219 0      #> 5       2 b          2.13    12     0    19 0.316 0.158  0.368 0.105 0.0526 #> 6       2 c          1.66    10     0    29 0.448 0.103  0.345 0.103 0      #> 7       3 a          3.5      5     0     6 0     0.333  0.167 0.333 0.167  #> 8       3 b          4.75     6     0    18 0     0.0556 0.333 0     0.611 head(res$matched) #> # A tibble: 6 × 7 #>   station replicate species             species_matched     count group    RA #>     <dbl> <chr>     <chr>               <chr>               <dbl> <dbl> <dbl> #> 1       1 a         Cumopsis fagei      Cumopsis fagei          2     2     0 #> 2       1 a         Diogenes pugilator  Diogenes pugilator      2     2     0 #> 3       1 a         Paradoneis armata   Paradoneis armata       1     3     0 #> 4       1 b         Bathyporeia elegans Bathyporeia elegans     1     1     0 #> 5       1 b         Diogenes pugilator  Diogenes pugilator      5     2     0 #> 6       1 b         Dispio uncinata     Dispio uncinata         1     3     0"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"calculate-m-ambi","dir":"Articles","previous_headings":"","what":"Calculate M-AMBI","title":"Get started","text":"Calculate M-AMBI multivariate AMBI index, based three separate species diversity metrics: AMBI index AMBI. Shannon diversity index H Species richness S. three indices required calculate MAMBI()included results returned AMBI() function.","code":""},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"limit-values","dir":"Articles","previous_headings":"Calculate M-AMBI","what":"Limit values","title":"Get started","text":"addition index values calculated observed species data, M-AMBI factor analysis requires values defining limits three metrics, corresponding best worst possible conditions. See Muxika, Borja, Bald (2007) details. default limit values used MAMBI() : default, upper limit values H S provided (= NA. provided explicitly, maximum values found input data used. results returned MAMBI() show limits used.","code":"limits_AMBI <- c(\"bad\" = 6, \"high\" = 0)  limits_H  <- c(\"bad\" = 0, \"high\" = NA)  limits_S  <- c(\"bad\" = 0, \"high\" = NA)"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"status-class-boundaries","dir":"Articles","previous_headings":"Calculate M-AMBI","what":"Status class boundaries","title":"Get started","text":"MAMBI() also returns status class (Bad, Poor, Moderate, Good High) M-AMBI index value. , compares calculated M-AMBI index value values defining boundaries status classes. PB - Poor / Bad MP - Moderate / Poor GM - Good / Moderate HG - High / Good default values class boundaries :","code":"bounds <-c(\"PB\" = 0.2, \"MP\" = 0.39, \"GM\" = 0.53, \"HG\" = 0.77)"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"call-mambi","dir":"Articles","previous_headings":"Calculate M-AMBI","what":"Call MAMBI()","title":"Get started","text":"call MAMBI() using previously generated AMBI results:","code":"res_mambi <- MAMBI(res$AMBI, var_H = \"H\", var_S = \"S\", var_AMBI = \"AMBI\")"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"m-ambi-results","dir":"Articles","previous_headings":"Calculate M-AMBI","what":"M-AMBI results","title":"Get started","text":"addition retaining values AMBI. H S, results include following information: x, y, z - factor scores giving coordinates new factor space. MAMBI - calculated M-AMBI index value Status - status class M-AMBI index value EQR - normalised EQR index dataframe returned contains 2 rows input data. input data contained 3 rows (1 station). results contain 5 rows. 2 additional rows show limit values three metrics used M-AMBI caclulations.","code":"res_mambi %>%   select(station, AMBI, H, S, x, y, z, MAMBI, Status, EQR) #> # A tibble: 5 × 10 #>   station  AMBI     H     S        x       y      z MAMBI Status   EQR #>     <dbl> <dbl> <dbl> <dbl>    <dbl>   <dbl>  <dbl> <dbl> <chr>  <dbl> #> 1       1  1.48  1.80     6  0.0366  -0.0556  0.584 0.518 Mod    0.467 #> 2       2  1.89  3.54    22 -0.246   -1.18   -1.78  0.893 High   0.907 #> 3       3  4.12  2.50     9 -0.00687  0.602   0.377 0.478 Mod    0.446 #> 4      NA  6     0        0  0.524    2.53    2.93  0     NA     0     #> 5      NA  0     3.54    22 -0.308   -1.90   -2.11  1     NA     1"},{"path":"https://niva-denmark.github.io/ambiR/articles/ambiR.html","id":"eqr-values","dir":"Articles","previous_headings":"Calculate M-AMBI > M-AMBI results","what":"EQR values","title":"Get started","text":"well status class, function also returns normalised index value 0 1 (EQR), calculated using bounds boundary values M-AMBI index. following EQR values correspond status class boundaries: 0.2 - Poor / Bad 0.4 - Moderate / Poor 0.6 - Good / Moderate 0.8 _ High / Good example, M-AMBI value station 3 0.478. lies M-AMBI value corresponding Moderate/Poor status class boundary (\"MP\" = 0.39) M-AMBI value corresponding Good/Moderate status class boundary (\"GM\" = 0.53). normalised EQR value given linear interpolation: EQR=0.4+(0.6−0.4)0.478−0.390.53−0.39 EQR = 0.4 + (0.6 - 0.4) \\frac{0.478 - 0.39}{0.53 - 0.39 }","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/articles/background.html","id":"the-ambi-index","dir":"Articles","previous_headings":"","what":"The AMBI index","title":"The AMBI index","text":"basis AMBI index soft-bottom macrofauna divided groups according sensitivity increasing environmental stress. distribution counts individuals relative abundance different groups used calculate quantitative measure ecological quality benthic environment.","code":""},{"path":"https://niva-denmark.github.io/ambiR/articles/background.html","id":"species-groups","dir":"Articles","previous_headings":"The AMBI index","what":"Species Groups","title":"The AMBI index","text":"Input AMBI() function dataframe species counts optional grouping variables, e.g. station replicate IDs. function matches species names input data names AMBI species list, order categorise observed species according AMBI method. tool calculates AMBI index resulting distribution individuals groups. AMBI species list gives groups (, II, III, IV, V) species classified, described Borja, Franco, Pérez (2000). Group Species sensitive organic enrichment present unpolluted conditions (initial state). include specialist carnivores deposit- feeding tubicolous polychaetes. Group II Species indifferent enrichment, always present low densities non-significant variations time (initial state, slight unbalance). include suspension feeders, less selective carnivores scavengers. Group III Species tolerant excess organic matter enrichment. species may occur normal conditions, populations stimulated organic richment (slight unbalance situations). surface deposit-feeding species, tubicolous spionids. Group IV Second-order opportunistic species (slight pronounced unbalanced situations). Mainly small sized polychaetes: subsurface deposit-feeders, cirratulids. Group V First-order opportunistic species (pronounced unbalanced situations). deposit- feeders, proliferate reduced sediments. list species groups updated several times authors AMBI software. version list used 5. December 2024. calculating fractions fif_i individuals belonging group ∈,II,III,IV,Vi \\{}  , II, III, IV, V, index given : AMBI=0*fI+1.5*fII+3*fIII+4.5*fIV+6*fV AMBI = 0 * f_{} + 1.5 * f_{II} + 3 * f_{III} + 4.5 * f_{IV} + 6 * f_{V} , greater proportion sensitive species, lower resulting AMBI index. sample consisting 100% species sensitive category (Group ) AMBI index 0.0. population consisting entirely species Group V index 6.0.","code":""},{"path":"https://niva-denmark.github.io/ambiR/articles/background.html","id":"m-ambi---the-multivariate-ambi-index","dir":"Articles","previous_headings":"","what":"M-AMBI - the multivariate AMBI index","title":"The AMBI index","text":"MAMBI() calculates M-AMBI multivariate AMBI index, based three separate species diversity metrics: AMBI index AMBI Shannon Wiener diversity index H’ Species richness S principles M-AMBI index described Muxika, Borja, Bald (2007) “AMBI, richness diversity, combined use, development, factor analysis together discriminant analysis, presented objective tool (named M-AMBI) assessing ecological quality status” , course, possible calculate M-AMBI using data generated analyses, outside {ambiR} package AMBI() function can conveniently provide 3 metrics used variables M-AMBI factorial analysis. input data values AMBI, H’ S, variables first standardized, subtracting mean dividing standard deviation. analysis requires information limits 3 variables: () values corresponding reference undisturbed conditions. Shannon diversity H’ species richness S, taken maximum values found data. assumes observations undisturbed sites care given suitable values provided user assumption hold. AMBI, reference condition value used 0, unless different value specified. (b) default limit values corresponding bad conditions AMBI = 6, H = 0 S = 0. factor analysis (FA) using principal component analysis method standardized variables generates 3 factors. Varimax rotation method applied results FA. factor scores (x, y z) new coordinates sampling station new factor space. coordinates used derive EQR M-AMBI values. M-AMBI score mean distance along zero one scale three dimensions. Depending specific regional conditions M-AMBI value corresponding Good/Moderate class boundaries can used convert M-AMBI values normalised EQR value Good/Moderate boundary EQR = 0.6.","code":""},{"path":"https://niva-denmark.github.io/ambiR/articles/background.html","id":"ambi-software","dir":"Articles","previous_headings":"","what":"AMBI software","title":"The AMBI index","text":"AMBI software developed free standalone software allow users perform AMBI index calculations. Later versions updated include multivariate index M-AMBI calculations adjustments species list used assign species ecological groups. software maintained updated AZTI. latest version can downloaded https://ambi.azti.es/. ambiR package extensively tested gives identical results AMBI software, long version species list select corresponds version used software.","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/articles/interactive.html","id":"test-data","dir":"Articles","previous_headings":"","what":"Test data","title":"Interactive mode","text":"create test data set species names counts","code":"df <- data.frame(station = c(\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",                              \"2\",\"2\",\"2\",\"2\",\"2\",\"2\"),                  species = c(\"Acidostoma neglectum\",                              \"Acrocirrus validus\",                              \"Acteocina bullata\",                              \"Austrohelice crassa\",                              \"Capitella nonatoi\",                              \"Watersipora subatra\",                              \"Zanclea giancarloi\",                              \"Zanclea sessilis\",                              \"Zonorhynchus sp.\",                              \"Acholoe squamosa\",                              \"Aglaophenia kirchenpaueri\",                              \"Tricellaria sp.\"),                  count = c(2, 4, 5, 3, 7, 2, 4, 5, 3, 7, 2, 3))"},{"path":"https://niva-denmark.github.io/ambiR/articles/interactive.html","id":"instructions","dir":"Articles","previous_headings":"","what":"Instructions","title":"Interactive mode","text":"run AMBI() interactive mode, use interactive = TRUE argument. species names input data frame recognized belonging AMBI species list user-defined species list, specified, message displayed showing number unrecognized species, giving instructions proceed assigning groups species. first species list unrecognized names displayed. proceed type console prompt: 1,2,3,4 5 - species assigned selected (AMBI species groups) 0 - assigning Group 0 means species inclued AMBI calculations count towards number assigned species. Enter - species name treated unrecognized included AMBI calculations. s - list recognized species names AMBI list displayed. species appear close unrecognized species sorted alphabetical order. 10 species names displayed. Typing s repeatedly display consecutive names AMBI list, 10 time. x - interactive species assignment process aborted. species groups assigned manually point discarded AMBI calculations continue using default, unsupervised, method.","code":""},{"path":"https://niva-denmark.github.io/ambiR/articles/interactive.html","id":"interactive-ambi-calculation","dir":"Articles","previous_headings":"","what":"Interactive AMBI calculation","title":"Interactive mode","text":"Typing s show species names close unrecognized species arranged alphabetical order. similar species names might give us clue species. case, satisfied name valid species name1 unsure group species assigned , assign group 0. Assigning group 0 means species included count assigned species calculating AMBI index. typed Enter species ignored included AMBI calculations. message displayed confirming selection (assigned) asked consider next unrecognized species name, Aglaophenia kirchenpaueri. type s see similar names: case can see two species belonging genus, Aglaophenia. assigned group 0 (assigned) make assumption unrecognized species assigned group. process repeated unrecognized species name.","code":"library(ambiR)  AMBI(df, by = c(\"station\"), quiet=F, interactive = T) #>  #> ── Assigning unrecognized species ────────────────────────────────────────────── #>  #> • 7 species names were not recognized. These will now be displayed, one at a #> time. #>  #> • For each species, you can assign it to one of the five AMBI categories (I, #> II, III, IV, V). Do this by entering an integer value from 1 to 5. #> Alternatively, you can assign a value of 0. This indicates that the species #> name is recognized but it is not possible to assign it to one of the five #> categories. #>  #> • If Enter is pressed, without providing a value, no change will be made. The #> species name in question will be treated as unrecognized. #>  #> • Enter s at the prompt to see a list of similar species names and their #> corresponding AMBI categories. #>  #> • Enter x to abort the interactive species selection. Any entries made up to #> that point will be discarded. All 7 species will be treated as unrecognized. #>  #> ── 1 Acholoe squamosa ── #>  #> ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar #>  names. x - abort interactive assignment. s  #> • Achelous ordwayi                                 (Group 1) #> • Acidostoma hancocki                              (Group 2) #> • Acidostoma neglectum                             (Group 0) #> • Acidostoma nodiferum                             (Group 1) #> • Acidostoma obesum                                (Group 1) #> • Acidostoma sarsi                                 (Group 1) #> • Acidostoma sp.                                   (Group 1) #> • Acila castrensis                                 (Group 2) #> • Acila insignis                                   (Group 2) #> • Aclis gulsonae                                   (Group 1) #> ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar #>  names. x - abort interactive assignment. 0  #> ✔ Acholoe squamosa - Not assigned #>  #> ── 2 Aglaophenia kirchenpaueri ── #> #> ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar #>  names. x - abort interactive assignment. s  #> • Aglaophamus verrilli                             (Group 2) #> • Aglaophenia acacia                               (Group 0) #> • Aglaophenia pluma                                (Group 0) #> • Agnezia septentrionalis                          (Group 2) #> • Aidanosagitta crassa                             (Group 1) #> • Aiptasia diaphana                                (Group 3) #> • Aiptasia mutabilis                               (Group 3) #> • Akanthophoreus gracilis                          (Group 1) #> • Akera bullata                                    (Group 1) #> • Akera sp.                                        (Group 1) #> ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar #>  names. x - abort interactive assignment. 0  #> ✔ Aglaophenia kirchenpaueri - Not assigned #> #> ── 3 Tricellaria sp. ── #> #> ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar #>  names. x - abort interactive assignment."},{"path":"https://niva-denmark.github.io/ambiR/articles/interactive.html","id":"results","dir":"Articles","previous_headings":"","what":"Results","title":"Interactive mode","text":"AMBI() returns list three dataframes, including matched. dataframe shows groups species assigned interactive species matching, include column source. ‘’ column indicates group assigned interactively.","code":"$matched    station                   species           species_matched count group source RA 1        1      Acidostoma neglectum      Acidostoma neglectum     2     0   <NA>  0 2        1        Acrocirrus validus        Acrocirrus validus     4     4   <NA>  0 3        1         Acteocina bullata         Acteocina bullata     5     1   <NA>  0 4        1       Austrohelice crassa       Austrohelice crassa     3     5   <NA>  0 5        1         Capitella nonatoi         Capitella nonatoi     7     5   <NA>  0 6        1       Watersipora subatra       Watersipora subatra     2     0      I NA 7        2        Zanclea giancarloi        Zanclea giancarloi     4     0      I NA 8        2          Zanclea sessilis          Zanclea sessilis     5     0      I NA 9        2          Zonorhynchus sp.          Zonorhynchus sp.     3     0      I NA 10       2          Acholoe squamosa          Acholoe squamosa     7     0      I NA 11       2 Aglaophenia kirchenpaueri Aglaophenia kirchenpaueri     2     0      I NA 12       2           Tricellaria sp.           Tricellaria sp.     3     3      I NA"},{"path":"https://niva-denmark.github.io/ambiR/articles/interactive.html","id":"aborting-interactive-mode","dir":"Articles","previous_headings":"","what":"Aborting interactive mode","title":"Interactive mode","text":"Typing x point interactive species assignment process abort interactive process. following message displayed: species groups assigned manually point discarded AMBI calculations proceed using default, unsupervised, method.","code":"x  #> ! interactive species assignment cancelled"},{"path":"https://niva-denmark.github.io/ambiR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ciarán J. Murray. Author, maintainer, copyright holder. Ángel Borja. Author. Sarai Pouso. Author. Iñigo Muxika. Author. Joxe Mikel Garmendia. Author. Steen Knudsen. Contributor.","code":""},{"path":"https://niva-denmark.github.io/ambiR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Murray CJ, Borja Á, Pouso S, Muxika , Garmendia JM (2025). ambiR: R package implementing AZTI Marine Biotic Index. NIVA Denmark, Copenhagen, Denmark. https://github.com/NIVA-Denmark/ambiR.","code":"@Manual{,   title = {ambiR: R package implementing the AZTI Marine Biotic Index},   author = {Ciarán J. Murray and Ángel Borja and Sarai Pouso and Iñigo Muxika and Joxe Mikel Garmendia},   organization = {NIVA Denmark},   address = {Copenhagen, Denmark},   year = {2025},   url = {https://github.com/NIVA-Denmark/ambiR}, }"},{"path":"https://niva-denmark.github.io/ambiR/index.html","id":"ambir-","dir":"","previous_headings":"","what":"Calculate AZTI’s Marine Biotic Index","title":"Calculate AZTI’s Marine Biotic Index","text":"R package implementing AZTI’s Marine Biotic Index.","code":""},{"path":"https://niva-denmark.github.io/ambiR/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Calculate AZTI’s Marine Biotic Index","text":"package allows user calculate AMBI index multivariate M-AMBI count abundance data benthic fauna species. addition, package includes functions calculate different versions Danish Quality Index (DKI) (Danish: Dansk Kvalitetsindeks), derived benthic index based AMBI. AMBI() - calculates AMBI index. MAMBI() - calculates multivariate M-AMBI index. Hdash() - calculates H’, Shannon diversity index. DKI2() - calculates salinity-normalised Danish quality index DKI (v2). DKI() - calculates Danish quality index DKI. get started, see vignette(\"ambiR\"). details running interactive mode, see vignette(\"interactive\"). AMBI index developed Ángel Borja colleagues AZTI. background explanation method calculation AMBI index see vignette(\"background\"). can also find link download original AMBI software.","code":""},{"path":"https://niva-denmark.github.io/ambiR/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Calculate AZTI’s Marine Biotic Index","text":"can install development version ambiR GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"NIVA-Denmark/ambiR\")"},{"path":"https://niva-denmark.github.io/ambiR/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"Calculate AZTI’s Marine Biotic Index","text":"basic example using small dataset, 2 stations. station 3 species counts. data organised dataframe 3 columns -called “long” format. , count recorded separate row. default, AMBI function returns AMBI results list AMBI groups species names input data assigned . , also use argument format_pct show estimated fractions percentages. See function documentation details: AMBI(). Another example using supplied test_data.","code":"library(ambiR)  df <- data.frame(station = c(\"1\",\"1\",\"1\",\"2\",\"2\",\"2\"),                  species = c(\"Acidostoma neglectum\",                              \"Acrocirrus validus\",                              \"Capitella nonatoi\",                              \"Acteocina bullata\",                              \"Austrohelice crassa\",                              \"Capitella nonatoi\"),                  count = c(8, 14, 23, 13, 17, 11))  AMBI(df, by = c(\"station\"), format_pct=1) #> $AMBI #> # A tibble: 2 × 12 #>   station  AMBI     H     S fNA       N I     II    III   IV    V     #>   <chr>   <dbl> <dbl> <int> <chr> <dbl> <chr> <chr> <chr> <chr> <chr> #> 1 1        5.43  1.46     3 17.8%    45 0.0%  0.0%  0.0%  37.8% 62.2% #> 2 2        4.10  1.56     3 0.0%     41 31.7% 0.0%  0.0%  0.0%  68.3% #> # ℹ 1 more variable: Disturbance <chr> #>  #> $matched #>   station              species      species_matched count group RA #> 1       1 Acidostoma neglectum Acidostoma neglectum     8     0  0 #> 2       1   Acrocirrus validus   Acrocirrus validus    14     4  0 #> 3       1    Capitella nonatoi    Capitella nonatoi    23     5  0 #> 4       2    Acteocina bullata    Acteocina bullata    13     1  0 #> 5       2  Austrohelice crassa  Austrohelice crassa    17     5  0 #> 6       2    Capitella nonatoi    Capitella nonatoi    11     5  0 library(ambiR)  ## calling AMBI using the test data set AMBI(test_data, by=c(\"station\"), var_rep = \"replicate\", format_pct=1) #> $AMBI #> # A tibble: 3 × 13 #>   station  AMBI AMBI_SD     H     S fNA       N I     II    III   IV    V     #>     <dbl> <dbl>   <dbl> <dbl> <int> <chr> <dbl> <chr> <chr> <chr> <chr> <chr> #> 1       1  1.48   0.338  1.80     6 0.0%     16 12.5% 75.0% 12.5% 0.0%  0.0%  #> 2       2  1.89   0.238  3.54    22 0.0%     80 40.0% 13.8% 30.0% 15.0% 1.2%  #> 3       3  4.12   0.884  2.50     9 0.0%     24 0.0%  12.5% 29.2% 8.3%  50.0% #> # ℹ 1 more variable: Disturbance <chr> #>  #> $AMBI_rep #> # A tibble: 8 × 11 #>   station replicate  AMBI     S fNA       N I     II    III   IV    V     #>     <dbl> <chr>     <dbl> <dbl> <chr> <dbl> <chr> <chr> <chr> <chr> <chr> #> 1       1 a          1.8      3 0.0%      5 0.0%  80.0% 20.0% 0.0%  0.0%  #> 2       1 b          1.5      3 0.0%      7 14.3% 71.4% 14.3% 0.0%  0.0%  #> 3       1 c          1.12     2 0.0%      4 25.0% 75.0% 0.0%  0.0%  0.0%  #> 4       2 a          1.88    12 0.0%     32 40.6% 15.6% 21.9% 21.9% 0.0%  #> 5       2 b          2.13    12 0.0%     19 31.6% 15.8% 36.8% 10.5% 5.3%  #> 6       2 c          1.66    10 0.0%     29 44.8% 10.3% 34.5% 10.3% 0.0%  #> 7       3 a          3.5      5 0.0%      6 0.0%  33.3% 16.7% 33.3% 16.7% #> 8       3 b          4.75     6 0.0%     18 0.0%  5.6%  33.3% 0.0%  61.1% #>  #> $matched #> # A tibble: 53 × 7 #>    station replicate species             species_matched     count group    RA #>      <dbl> <chr>     <chr>               <chr>               <dbl> <dbl> <dbl> #>  1       1 a         Cumopsis fagei      Cumopsis fagei          2     2     0 #>  2       1 a         Diogenes pugilator  Diogenes pugilator      2     2     0 #>  3       1 a         Paradoneis armata   Paradoneis armata       1     3     0 #>  4       1 b         Bathyporeia elegans Bathyporeia elegans     1     1     0 #>  5       1 b         Diogenes pugilator  Diogenes pugilator      5     2     0 #>  6       1 b         Dispio uncinata     Dispio uncinata         1     3     0 #>  7       1 c         Astarte sp.         Astarte sp.             1     1     0 #>  8       1 c         Diogenes pugilator  Diogenes pugilator      3     2     0 #>  9       2 a         Cumopsis fagei      Cumopsis fagei          1     2     0 #> 10       2 a         Glycera tridactyla  Glycera tridactyla      2     2     0 #> # ℹ 43 more rows"},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"AMBI() matches list species counts AMBI species list calculates AMBI index.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"","code":"AMBI(   df,   by = NULL,   var_rep = NA_character_,   var_species = \"species\",   var_count = \"count\",   df_species = NULL,   var_group_AMBI = \"group\",   groups_strict = TRUE,   quiet = FALSE,   interactive = FALSE,   format_pct = NA,   show_class = TRUE,   exact_species_match = FALSE )"},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"df dataframe species observations vector column names found df calculations grouped e.g. c(\"station\",\"date\") var_rep optional column name df contains name column identifying replicates. replicates used, AMBI index calculated replicate average calculated combination variables. Shannon diversity index H calculated done species counts collected within groups without consideration replicates. var_species name column df containing species names var_count name column df containing count/density/abundance df_species optional dataframe user-specified species groups. default, function matches species df official species list AZTI. dataframe user-defined list species provided, search species groups also made list. see Details. var_group_AMBI optional name column df_species containing groups AMBI index calculations. specified integer values 1 7. values ignored. df_species specified var_group_AMBI ignored. groups_strict default, user-assigned species group conflicts AZTI group assignment ignored original group remains unchanged. argument groups_strict = FALSE used user-assigned groups always override AMBI groups case conflict. use option unless sure know ! invalidate results. quiet warnings low numbers species /individuals contained warnings dataframe. default (quiet = FALSE) warnings also shown console. function called parameter quiet = TRUE warnings displayed console. interactive (default FALSE) species name input data found AZTI species list, seen output dataframe matched. interactive mode selected, user given opportunity assign manually species group (, II, III, IV, V) mark species assigned species group (see details). format_pct (optional) default, frequency results including fraction total numbers within species group expressed real numbers . argument given positive integer value (e.g. format_pct = 2) fractions expressed percentages number digits shown decimal point equal number specified. NOTE formatting percentages, values converted text may lose precision. show_class (default TRUE). TRUE AMBI results include column showing AMBI disturbance classification Undisturbed, Slightly disturbed, Moderately disturbed, Heavily disturbed. exact_species_match default, family name without sp. matched family name AMBI (user-specified) species list includes sp.. option exact_species_match = TRUE used, species names matched identical names.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"list dataframes: AMBI : results AMBI index calculations. unique combination variables, following values calculated: AMBI : AMBI index value AMBI_SD : sample standard deviation AMBI included replicates used specified var_rep. N : number individuals S : number species H : Shannon diversity index H' fNA : fraction individuals assigned, , matched species AZTI species Group 0. Note different number rows match found. excluded totals. AMBI_rep : results AMBI index calculations per replicate. dataframe present observation data includes replicates user specified var_rep. Similar main AMBI result include results H (Shannon diversity index) AMBI_SD (sample standard deviation AMBI) estimated replicate level. matched : original dataframe columns added species list. Contains following columns: group : showing species group. species/taxa df matched NA value column. RA : indicating species reallocatable according AZTI list. , re-assigned different species group. source : column included user-specified list provided df_species, species groups assigned interactively. '' column indicates group assigned interactively. 'U'_shows group information came user-provided species list. AnNA` value indicates interactive user-provided changes applied. warnings : dataframe showing warnings combination variables warning percentage individuals assigned group higher 20% (null) number species less 3 (null) number individuals less 6","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"theory behind AMBI index calculations details method, developed Borja et al. (2000)","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"ambi-method","dir":"Reference","previous_headings":"","what":"AMBI method","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"Species can matched one five groups, distribution individuals groups reflecting different levels stress ecosystem. Group . Species sensitive organic enrichment present unpolluted conditions (initial state). include specialist carnivores deposit- feeding tubicolous polychaetes. Group II. Species indifferent enrichment, always present low densities non-significant variations time (initial state, slight unbalance). include suspension feeders, less selective carnivores scavengers. Group III. Species tolerant excess organic matter enrichment. species may occur normal conditions, populations stimulated organic enrichment (slight unbalance situations). surface deposit-feeding species, tubicolous spionids. Group IV. Second-order opportunistic species (slight pronounced unbalanced situations). Mainly small sized polychaetes: subsurface deposit-feeders, cirratulids. Group V. First-order opportunistic species (pronounced unbalanced situations). deposit- feeders, proliferate reduced sediments. distribution ecological groups, according sensitivity pollution stress, provides BI eight levels, 0 7 Biotic Coefficient = (0.0 * GI + l.5 * GII + 3.0 * GIII + 4.5 * GIV + 6.0 * GV) : Gn := fraction individuals Group n [, II, III, IV, V] certain circumstances, AMBI index used: percentage individuals assigned group higher 20% (null) number species less 3 (null) number individuals less 6 cases function still perform calculations also return warning.(see )","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"results","dir":"Reference","previous_headings":"","what":"Results","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"output function consists list least three dataframes: AMBI containing calculated AMBI index, well information. (AMBI_rep) generated replicates used, showing AMBI index replicate matched showing species matches used warnings containing warnings generated regarding numbers species numbers individuals","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"species-matching-and-interactive-mode","dir":"Reference","previous_headings":"","what":"Species matching and interactive mode","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"function check species list supplied function call using argument df_species, specified. function also search names AMBI standard list. , match found either, species recorded NAvalue species group ignored calculations. calling function checking output first function call, user can identify species names  matched. , necessary, can provide update dataframe list user-defined species group assignments, running function second time.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"conflicts","dir":"Reference","previous_headings":"","what":"Conflicts","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"conflict user-provided group assignment species group specified AMBI species group information, one selected. outcome depends number things: species AMBI list considered reallocatable (RA) - , can disagreement species group belong . species, user-specified groups replace default group. species reallocatable, user-specified groups default ignored. However, function called argument groups_strict = FALSE user-specified groups override AMBI species groups. conflicts outcomes recorded matched output.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"interactive-mode","dir":"Reference","previous_headings":"","what":"interactive mode","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"function called  interactive mode, using argument interactive = TRUE user opportunity manually assign species groups (, II, III, IV, V) species names identified. user typing 1, 2, 3, 4 5 pressing Enter. Alternatively, user can type 0 mark species recognized assigned group. typing Enter without number species recorded unidentified (NA). result returned calling function non-interactive mode. two options: typing s display list 10 species names occur close unrecognized name names sorted alphabetical order. Entering s second time display next 10 names, . Finally, entering x abort interactive species assignment process. species groups assigned manually point discarded calculations process non-interactive mode. user-provided group information recorded matched results.","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculates AMBI, the AZTI Marine Biotic Index — AMBI","text":"","code":"# example (1) - using test data included with package  AMBI(test_data, by=c(\"station\"), var_rep=\"replicate\") #> $AMBI #> # A tibble: 3 × 13 #>   station  AMBI AMBI_SD     H     S   fNA     N     I    II   III     IV      V #>     <dbl> <dbl>   <dbl> <dbl> <int> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1       1  1.48   0.338  1.80     6     0    16 0.125 0.75  0.125 0      0      #> 2       2  1.89   0.238  3.54    22     0    80 0.4   0.138 0.3   0.15   0.0125 #> 3       3  4.12   0.884  2.50     9     0    24 0     0.125 0.292 0.0833 0.5    #> # ℹ 1 more variable: Disturbance <chr> #>  #> $AMBI_rep #> # A tibble: 8 × 11 #>   station replicate  AMBI     S   fNA     N     I     II   III    IV      V #>     <dbl> <chr>     <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl> <dbl> <dbl>  <dbl> #> 1       1 a          1.8      3     0     5 0     0.8    0.2   0     0      #> 2       1 b          1.5      3     0     7 0.143 0.714  0.143 0     0      #> 3       1 c          1.12     2     0     4 0.25  0.75   0     0     0      #> 4       2 a          1.88    12     0    32 0.406 0.156  0.219 0.219 0      #> 5       2 b          2.13    12     0    19 0.316 0.158  0.368 0.105 0.0526 #> 6       2 c          1.66    10     0    29 0.448 0.103  0.345 0.103 0      #> 7       3 a          3.5      5     0     6 0     0.333  0.167 0.333 0.167  #> 8       3 b          4.75     6     0    18 0     0.0556 0.333 0     0.611  #>  #> $matched #> # A tibble: 53 × 7 #>    station replicate species             species_matched     count group    RA #>      <dbl> <chr>     <chr>               <chr>               <dbl> <dbl> <dbl> #>  1       1 a         Cumopsis fagei      Cumopsis fagei          2     2     0 #>  2       1 a         Diogenes pugilator  Diogenes pugilator      2     2     0 #>  3       1 a         Paradoneis armata   Paradoneis armata       1     3     0 #>  4       1 b         Bathyporeia elegans Bathyporeia elegans     1     1     0 #>  5       1 b         Diogenes pugilator  Diogenes pugilator      5     2     0 #>  6       1 b         Dispio uncinata     Dispio uncinata         1     3     0 #>  7       1 c         Astarte sp.         Astarte sp.             1     1     0 #>  8       1 c         Diogenes pugilator  Diogenes pugilator      3     2     0 #>  9       2 a         Cumopsis fagei      Cumopsis fagei          1     2     0 #> 10       2 a         Glycera tridactyla  Glycera tridactyla      2     2     0 #> # ℹ 43 more rows #>    # example (2)  df <- data.frame(station = c(\"1\",\"1\",\"2\",\"2\",\"2\"), species = c(\"Acidostoma neglectum\",             \"Acrocirrus validus\",             \"Acteocina bullata\",             \"Austrohelice crassa\",             \"Capitella nonatoi\"),             count = c(2, 4, 5, 3, 7))   AMBI(df, by = c(\"station\")) #> Warning: station 1: The percentage of individuals not assigned to a group is higher than #> 20% [33.3%]. #> Warning: station 1: The (not null) number of species is less than 3 [2]. #> Warning: station 1: The (not null) number of individuals is less than 6 [4]. #> $AMBI #> # A tibble: 2 × 12 #>   station  AMBI     H     S   fNA     N     I    II   III    IV     V #>   <chr>   <dbl> <dbl> <int> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> #> 1 1         4.5 0.918     2 0.333     6 0         0     0     1 0     #> 2 2         4   1.51      3 0        15 0.333     0     0     0 0.667 #> # ℹ 1 more variable: Disturbance <chr> #>  #> $matched #>   station              species      species_matched count group RA #> 1       1 Acidostoma neglectum Acidostoma neglectum     2     0  0 #> 2       1   Acrocirrus validus   Acrocirrus validus     4     4  0 #> 3       2    Acteocina bullata    Acteocina bullata     5     1  0 #> 4       2  Austrohelice crassa  Austrohelice crassa     3     5  0 #> 5       2    Capitella nonatoi    Capitella nonatoi     7     5  0 #>  #> $warnings #> # A tibble: 3 × 2 #>   station warning                                                                #>   <chr>   <chr>                                                                  #> 1 1       The percentage of individuals not assigned to a group is higher than … #> 2 1       The (not null) number of species is less than 3 [2].                   #> 3 1       The (not null) number of individuals is less than 6 [4].               #>    # example (3) - conflict with AZTI species group  df_user <- data.frame(               species = c(\"Cumopsis fagei\"),               group = c(1))  AMBI(test_data, by=c(\"station\"), var_rep=\"replicate\", df_species=df_user) #> ℹ 1 user-assigned group in conflict with AMBI was ignored: #> ✖ Cumopsis fagei (II)→(I) #>  #> $AMBI #> # A tibble: 3 × 13 #>   station  AMBI AMBI_SD     H     S   fNA     N     I    II   III     IV      V #>     <dbl> <dbl>   <dbl> <dbl> <int> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1       1  1.48   0.338  1.80     6     0    16 0.125 0.75  0.125 0      0      #> 2       2  1.89   0.238  3.54    22     0    80 0.4   0.138 0.3   0.15   0.0125 #> 3       3  4.12   0.884  2.50     9     0    24 0     0.125 0.292 0.0833 0.5    #> # ℹ 1 more variable: Disturbance <chr> #>  #> $AMBI_rep #> # A tibble: 8 × 11 #>   station replicate  AMBI     S   fNA     N     I     II   III    IV      V #>     <dbl> <chr>     <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl> <dbl> <dbl>  <dbl> #> 1       1 a          1.8      3     0     5 0     0.8    0.2   0     0      #> 2       1 b          1.5      3     0     7 0.143 0.714  0.143 0     0      #> 3       1 c          1.12     2     0     4 0.25  0.75   0     0     0      #> 4       2 a          1.88    12     0    32 0.406 0.156  0.219 0.219 0      #> 5       2 b          2.13    12     0    19 0.316 0.158  0.368 0.105 0.0526 #> 6       2 c          1.66    10     0    29 0.448 0.103  0.345 0.103 0      #> 7       3 a          3.5      5     0     6 0     0.333  0.167 0.333 0.167  #> 8       3 b          4.75     6     0    18 0     0.0556 0.333 0     0.611  #>  #> $matched #> # A tibble: 53 × 9 #>    station replicate species species_matched count group source    RA group_note #>      <dbl> <chr>     <chr>   <chr>           <dbl> <dbl> <chr>  <dbl> <chr>      #>  1       1 a         Cumops… Cumopsis fagei      2     2 NA         0 ignored u… #>  2       1 a         Diogen… Diogenes pugil…     2     2 NA         0 NA         #>  3       1 a         Parado… Paradoneis arm…     1     3 NA         0 NA         #>  4       1 b         Bathyp… Bathyporeia el…     1     1 NA         0 NA         #>  5       1 b         Diogen… Diogenes pugil…     5     2 NA         0 NA         #>  6       1 b         Dispio… Dispio uncinata     1     3 NA         0 NA         #>  7       1 c         Astart… Astarte sp.         1     1 NA         0 NA         #>  8       1 c         Diogen… Diogenes pugil…     3     2 NA         0 NA         #>  9       2 a         Cumops… Cumopsis fagei      1     2 NA         0 ignored u… #> 10       2 a         Glycer… Glycera tridac…     2     2 NA         0 NA         #> # ℹ 43 more rows #>"},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_sal.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimum AMBI as a linear function of salinity — AMBI_sal","title":"Minimum AMBI as a linear function of salinity — AMBI_sal","text":"Used DKI2(), adjusting AMBI index account decreasing species diversity decreasing salinity.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_sal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimum AMBI as a linear function of salinity — AMBI_sal","text":"","code":"AMBI_sal(psal, intercept = 3.083, slope = -0.111)"},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_sal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Minimum AMBI as a linear function of salinity — AMBI_sal","text":"psal numeric, salinity intercept numeric, default 3.083 slope numeric, default -0.111","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_sal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Minimum AMBI as a linear function of salinity — AMBI_sal","text":"numeric value AMBI_min","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_sal.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Minimum AMBI as a linear function of salinity — AMBI_sal","text":"AMBI_sal() H_sal() named, respectively, AMBI_min H_max DKI documentation (Carstensen et al., 2014). renamed ambiR reflect fact functions salinity minimum maximum values data used.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_sal.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minimum AMBI as a linear function of salinity — AMBI_sal","text":"","code":"AMBI_sal(20.1) #> [1] 0.8519"},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_species.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns species list for AMBI calculations — AMBI_species","title":"Returns species list for AMBI calculations — AMBI_species","text":"AMBI_species() returns dataframe list species AMBI group. Called function AMBI() used match species observed data find species groups. latest version 5th December 2025","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_species.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns species list for AMBI calculations — AMBI_species","text":"","code":"AMBI_species(version = \"\")"},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_species.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns species list for AMBI calculations — AMBI_species","text":"version string, version species list return. default value empty string (\"\") returns latest version list (5. December 2025). valid values version \"2024\" (8. October 2024) \"2022\" (31. May 2022).","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_species.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns species list for AMBI calculations — AMBI_species","text":"data frame 11,952 rows* 3 columns: species Species name genus (spp.) group Species group AMBI index calculation: 1, 2, 3, 4 5. value 0 indicates species assigned species group. RA reallocatable (0 1), 1 indicates species re-assigned different species group.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_species.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Returns species list for AMBI calculations — AMBI_species","text":"species groups, described Borja et al. (2000): Group  Species sensitive organic enrichment present unpolluted conditions (initial state). include specialist carnivores deposit-feeding tubicolous polychaetes. Group II  Species indifferent enrichment, always present low densities non-significant variations time (initial state, slight unbalance). include suspension feeders, less selective carnivores scavengers. Group III  Species tolerant excess organic matter enrichment. species may occur normal conditions, populations stimulated organic richment (slight unbalance situations). surface deposit-feeding species, tubicolous spionids. Group IV  Second-order opportunistic species (slight pronounced unbalanced situations). Mainly small sized polychaetes: subsurface deposit-feeders, cirratulids. Group V  First-order opportunistic species (pronounced unbalanced situations). deposit-feeders, proliferate reduced sediments.","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/reference/AMBI_species.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Returns species list for AMBI calculations — AMBI_species","text":"","code":"AMBI_species() %>% head() #> # A tibble: 6 × 3 #>   species                       group    RA #>   <chr>                         <dbl> <dbl> #> 1 Aartsenia candida                 1     0 #> 2 Abarenicola affinis               1     0 #> 3 Abarenicola affinis affinis       1     0 #> 4 Abarenicola affinis chilensis     3     0 #> 5 Abarenicola claparedei            1     0 #> 6 Abarenicola claparedi             1     0  AMBI_species() %>% tail() #> # A tibble: 6 × 3 #>   species                  group    RA #>   <chr>                    <dbl> <dbl> #> 1 Zoantharia                   1     0 #> 2 Zoidbergus tenuimanus        3     0 #> 3 Zoobotryon verticillatum     2     0 #> 4 Zygochlamys patagonica       1     0 #> 5 Zygonemertes virescens       2     0 #> 6 Zygophylax sp.               2     0"},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates DKI (v1) — DKI","title":"Calculates DKI (v1) — DKI","text":"DKI() calculates Danish quality index DKI (v1) (Carstensen et al., 2014) DKI based AMBI can calculated first calculating AMBI, AZTI Marine Biotic Index, H', Shannon diversity index. indices included output function AMBI(). function uses estimated maximum possible value H' H_max Danish waters reference value normalise DKI. value specified argument, default value used 5.0 \"However, present exercise, Danish method used Hmax (∼5) kind reference\" Borja et al., 2007","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates DKI (v1) — DKI","text":"","code":"DKI(AMBI, H, N, S, H_max = 5)"},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates DKI (v1) — DKI","text":"AMBI AMBI, AZTI Marine Biotic Index, calculated using AMBI() H H', Shannon diversity index, calculated using Hdash() N number individuals - generated AMBI() Hdash() S number species - generated AMBI() Hdash() H_max maximum H' used normalise AMBI, default 5","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates DKI (v1) — DKI","text":"DKI index value","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculates DKI (v1) — DKI","text":"AMBI() Hdash() functions take dataframe observations argument. DKI functions, DKI2() DKI(), take dataframe argument. Instead take values input parameters, either single values vectors. calculate DKI dataframe AMBI values, called e.g. within dplyr::mutate() function call. See examples .","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculates DKI (v1) — DKI","text":"","code":"# Simple example  DKI(AMBI = 1.61, H = 2.36, N = 25, S = 6) #> [1] 0.55683   # ------ Example workflow for calculating DKI from species counts ----  # calculate AMBI index dfAMBI <- AMBI(test_data, by = c(\"station\"), var_rep=\"replicate\")[[\"AMBI\"]]  # show AMBI results dfAMBI #> # A tibble: 3 × 13 #>   station  AMBI AMBI_SD     H     S   fNA     N     I    II   III     IV      V #>     <dbl> <dbl>   <dbl> <dbl> <int> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1       1  1.48   0.338  1.80     6     0    16 0.125 0.75  0.125 0      0      #> 2       2  1.89   0.238  3.54    22     0    80 0.4   0.138 0.3   0.15   0.0125 #> 3       3  4.12   0.884  2.50     9     0    24 0     0.125 0.292 0.0833 0.5    #> # ℹ 1 more variable: Disturbance <chr>  # calculate DKI from AMBI results dplyr::mutate(dfAMBI, DKI = DKI(AMBI, H, N, S)) #> # A tibble: 3 × 14 #>   station  AMBI AMBI_SD     H     S   fNA     N     I    II   III     IV      V #>     <dbl> <dbl>   <dbl> <dbl> <int> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1       1  1.48   0.338  1.80     6     0    16 0.125 0.75  0.125 0      0      #> 2       2  1.89   0.238  3.54    22     0    80 0.4   0.138 0.3   0.15   0.0125 #> 3       3  4.12   0.884  2.50     9     0    24 0     0.125 0.292 0.0833 0.5    #> # ℹ 2 more variables: Disturbance <chr>, DKI <dbl>"},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI2.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates DKI (v2) — DKI2","title":"Calculates DKI (v2) — DKI2","text":"DKI2() calculate salinity-normalised version Danish quality index (DKI) (Carstensen et al., 2014) DKI index based AMBI can calculated first calculating AMBI, AZTI Marine Biotic Index, H', Shannon diversity index. indices included output function AMBI(). function uses linear relationships salinity limits AMBI Hdash normalise index. done account expected lower species diversity regions lower salinity. Since index normalised salinity, function also requires measured estimated salinity psal argument.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates DKI (v2) — DKI2","text":"","code":"DKI2(AMBI, H, N, psal)"},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates DKI (v2) — DKI2","text":"AMBI AMBI, AZTI Marine Biotic Index, calculated using AMBI() H H', Shannon diversity index, calculated using Hdash() N number individuals - generated AMBI() Hdash() psal salinity","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates DKI (v2) — DKI2","text":"DKI index value","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI2.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculates DKI (v2) — DKI2","text":"AMBI() Hdash() functions take dataframe observations argument. DKI functions, DKI2() DKI(), take dataframe argument. Instead take values input parameters, either single values vectors. calculate DKI dataframe AMBI values, called e.g. within dplyr::mutate() function call. See examples .","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/reference/DKI2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculates DKI (v2) — DKI2","text":"","code":"# Simple example  DKI2(AMBI = 1.61, H = 2.36, N = 25, psal = 21.4) #> [1] 0.7043697   # ------ Example workflow for calculating DKI (v2) from species counts ----  # calculate AMBI index dfAMBI <- AMBI(test_data, by = c(\"station\"), var_rep = \"replicate\")[[\"AMBI\"]]  # show AMBI results dfAMBI #> # A tibble: 3 × 13 #>   station  AMBI AMBI_SD     H     S   fNA     N     I    II   III     IV      V #>     <dbl> <dbl>   <dbl> <dbl> <int> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1       1  1.48   0.338  1.80     6     0    16 0.125 0.75  0.125 0      0      #> 2       2  1.89   0.238  3.54    22     0    80 0.4   0.138 0.3   0.15   0.0125 #> 3       3  4.12   0.884  2.50     9     0    24 0     0.125 0.292 0.0833 0.5    #> # ℹ 1 more variable: Disturbance <chr>  # add salinity values - these are realistic but invented values dfAMBI <- dplyr::mutate(dfAMBI, psal=ifelse(station == 1, 21.3, 26.5))  # calculate DKI from AMBI results dfAMBI <- dplyr::mutate(dfAMBI, DKI=DKI2(AMBI, H, N, psal))"},{"path":"https://niva-denmark.github.io/ambiR/reference/H_sal.html","id":null,"dir":"Reference","previous_headings":"","what":"Maximum H' as a linear function of salinity — H_sal","title":"Maximum H' as a linear function of salinity — H_sal","text":"Used DKI2(), adjusting Shannon diversity index H' account decreasing species diversity decreasing salinity.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/H_sal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Maximum H' as a linear function of salinity — H_sal","text":"","code":"H_sal(psal, intercept = 2.117, slope = 0.086)"},{"path":"https://niva-denmark.github.io/ambiR/reference/H_sal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Maximum H' as a linear function of salinity — H_sal","text":"psal numeric salinity intercept numeric, default 2.117 slope numeric default 0.086","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/H_sal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Maximum H' as a linear function of salinity — H_sal","text":"numeric value H_max","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/H_sal.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Maximum H' as a linear function of salinity — H_sal","text":"AMBI_sal() H_sal() named, respectively, AMBI_min H_max DKI documentation (Carstensen et al., 2014). renamed ambiR reflect fact functions salinity minimum maximum values data used.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/H_sal.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Maximum H' as a linear function of salinity — H_sal","text":"","code":"H_sal(20.1) #> [1] 3.8456"},{"path":"https://niva-denmark.github.io/ambiR/reference/Hdash.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates H' the Shannon diversity index — Hdash","title":"Calculates H' the Shannon diversity index — Hdash","text":"Hdash() matches list species counts AMBI species list calculates H' Shannon diversity index Shannon, 1948","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/Hdash.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates H' the Shannon diversity index — Hdash","text":"","code":"Hdash(   df,   by = NULL,   var_species = \"species\",   var_count = \"count\",   check_species = TRUE,   df_species = NULL )"},{"path":"https://niva-denmark.github.io/ambiR/reference/Hdash.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates H' the Shannon diversity index — Hdash","text":"df dataframe species observations vector column names found df calculations grouped e.g. c(\"station\",\"date\") var_species name column df containing species names var_count name column df containing count/density/abundance check_species boolean, default = TRUE. TRUE, species found species list included H' index. default, AZTI species list used. df_species optional dataframe user-specified species list.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/Hdash.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates H' the Shannon diversity index — Hdash","text":"list two dataframes: H : results AMBI index calculations. unique combination byvariables following values calculated: H : Shannon diversity Index, H' S : number species N : number individuals match : original dataframe columns added species list. user-specified list provided df_species, columns included. user-specified species list contains single column species names, new column match created, value 1 indicating match NA value match found. default AZTI species list following additional columns included: group : showing AMBI species group RA : indicating species reallocatable according AZTI list. , re-assigned different species group.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/Hdash.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculates H' the Shannon diversity index — Hdash","text":"function called argument check_species = TRUE species successfully matched specified species list included calculations. default. function called check_species = FALSEthen rows counted.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/Hdash.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculates H' the Shannon diversity index — Hdash","text":"","code":"Hdash(test_data, by=c(\"station\")) #> $H #> # A tibble: 3 × 4 #>   station     H     N     S #>     <dbl> <dbl> <dbl> <int> #> 1       1  1.80    16     6 #> 2       2  3.54    80    22 #> 3       3  2.50    24     9 #>  #> $matched #> # A tibble: 53 × 6 #>    station replicate species             count group    RA #>      <dbl> <chr>     <chr>               <dbl> <dbl> <dbl> #>  1       1 a         Cumopsis fagei          2     2     0 #>  2       1 a         Diogenes pugilator      2     2     0 #>  3       1 a         Paradoneis armata       1     3     0 #>  4       1 b         Bathyporeia elegans     1     1     0 #>  5       1 b         Diogenes pugilator      5     2     0 #>  6       1 b         Dispio uncinata         1     3     0 #>  7       1 c         Astarte sp.             1     1     0 #>  8       1 c         Diogenes pugilator      3     2     0 #>  9       2 a         Cumopsis fagei          1     2     0 #> 10       2 a         Glycera tridactyla      2     2     0 #> # ℹ 43 more rows #>"},{"path":"https://niva-denmark.github.io/ambiR/reference/MAMBI.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates M-AMBI, the multivariate AZTI Marine Biotic Index — MAMBI","title":"Calculates M-AMBI, the multivariate AZTI Marine Biotic Index — MAMBI","text":"Calculates M-AMBI multivariate AMBI index, based three separate species diversity metrics: AMBI index AMBI. Shannon diversity index H' Species richness S. \"AMBI, richness diversity, combined use, development, factor analysis together discriminant analysis, presented objective tool (named M-AMBI) assessing ecological quality status\" Muxika et al., 2007","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/MAMBI.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates M-AMBI, the multivariate AZTI Marine Biotic Index — MAMBI","text":"","code":"MAMBI(   df,   by = NULL,   var_H = \"H\",   var_S = \"S\",   var_AMBI = \"AMBI\",   limits_AMBI = c(bad = 6, high = 0),   limits_H = c(bad = 0, high = NA),   limits_S = c(bad = 0, high = NA),   bounds = c(PB = 0.2, MP = 0.39, GM = 0.53, HG = 0.77) )"},{"path":"https://niva-denmark.github.io/ambiR/reference/MAMBI.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates M-AMBI, the multivariate AZTI Marine Biotic Index — MAMBI","text":"df dataframe diversity metrics vector column names found df calculations grouped  e.g. c(\"station\"). grouping columns specified, mean values 3 metrics calculated within group calculating M-AMBI (default NULL) var_H name column df containing H' Shannon species diversity  (default \"H\") var_S name column df containing S species richness (default \"S\") var_AMBI name column df containing AMBI index (default \"AMBI\") limits_AMBI named vector length 2, specifying values AMBI corresponding () worst possible condition (\"bad\") M-AMBI EQR equal 0.0 (ii) best possible condition (\"high\") M-AMBI EQR equal 1.0. Default c(\"bad\" = 6, \"high\" = 0). limits_H named vector length 2, specifying values H' corresponding () worst possible condition (\"bad\") M-AMBI EQR equal 0.0 (ii) best possible condition (\"high\") M-AMBI EQR equal 1.0. Default c(\"bad\" = 0, \"high\" = NA). \"bad\" value NA lowest value occurring df \"high\" NA highest value used. limits_S named vector length 2, specifying values S corresponding () worst possible condition (\"bad\") M-AMBI EQR equal 0.0 (ii) best possible condition (\"high\") M-AMBI EQR equal 1.0. Default c(\"bad\" = 0, \"high\" = NA). \"bad\" value NA lowest value occurring df \"high\" NA highest value used. bounds named vector (length 4) EQR boundary values used normalise M-AMBI  EQR values boundary Good Moderate ecological status 0.6. specify values M-AMBI corresponding boundaries () Poor Bad status (\"PB\"), (ii) Moderate Poor status (\"MP\"), (iii) Good Moderate status (\"GM\"), (iv) High Good status (\"HG\"). Default c(\"PB\" = 0.2, \"MP\" = 0.39, \"GM\" = 0.53, \"HG\" = 0.77)","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/MAMBI.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates M-AMBI, the multivariate AZTI Marine Biotic Index — MAMBI","text":"dataframe containing results M-AMBI index calculations. unique combination variables, following values calculated: M-AMBI : M-AMBI index value X,Y,Z : factor scores giving coordinates new factor space. variables specified (= NULL), M-AMBI calculated row df. addition, dataframe returned contains 2 extra rows. contain limits applied metrics, corresponding \"bad\" (M-AMBI = 0.0) \"high\" (M-AMBI = 1.0), specified arguments limits_AMBI, limits_H, limits_S taken data.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/MAMBI.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculates M-AMBI, the multivariate AZTI Marine Biotic Index — MAMBI","text":"input dataframe df contain three metrics AMBI, H' S, identified column names var_AMBI (default \"AMBI\"), var_H (default \"H\") var_S (default \"S\"). three metrics found input data, function return error. AMBI calculated using AMBI() function. H' can calculated using Hdash() function also included additional output AMBI() called non-default argument H = TRUE. S output functions AMBI() Hdash(). means input MAMBI() can generated species count data using using AMBI() function.","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/reference/MAMBI.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculates M-AMBI, the multivariate AZTI Marine Biotic Index — MAMBI","text":"","code":"df <- data.frame(station = c(1, 1, 1, 2, 2, 2, 3, 3),                  replicates = c(\"a\", \"b\", \"c\", \"a\", \"b\", \"c\", \"a\", \"b\"),                  AMBI = c(1.8, 1.5, 1.125, 1.875, 2.133, 1.655, 3.5, 4.75),                  H = c(1.055, 0.796, 0.562, 2.072, 2.333, 1.789, 1.561, 1.303),                  S = c(3, 3, 2, 12, 12, 10, 5, 6))  MAMBI(df, by = c(\"station\")) #> # A tibble: 5 × 11 #>   station Bounds  AMBI     H     S      x      y        z MAMBI Status   EQR #>     <dbl> <chr>  <dbl> <dbl> <dbl>  <dbl>  <dbl>    <dbl> <dbl> <chr>  <dbl> #> 1       1 NA      1.48 0.804  2.67  0.863 -0.248  0.00897 0.464 Mod    0.439 #> 2       2 NA      1.89 2.06  11.3  -2.11  -0.486  0.00359 0.893 High   0.907 #> 3       3 NA      4.12 1.43   5.5   0.346  0.449  0.0334  0.497 Mod    0.456 #> 4      NA Bad     6    0      0     3.53   1.38  -0.0519  0     NA     0     #> 5      NA High    0    2.06  11.3  -2.63  -1.09   0.00597 1     NA     1"},{"path":"https://niva-denmark.github.io/ambiR/reference/ambiR-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ambiR: Calculate AZTI’s Marine Biotic Index — ambiR-package","title":"ambiR: Calculate AZTI’s Marine Biotic Index — ambiR-package","text":"Calculate AZTI’s Marine Biotic Index _AMBI_, well Shannon Diversity Index _H'_ Danish benthic fauna quality index _DKI_. _Borja, ., J. Franco, V. Pérez, 2000. marine biotic index establish ecological quality soft bottom benthos within European estuarine coastal environments Marine Pollution Bulletin 40(12) 1100-1114_.","code":""},{"path":[]},{"path":"https://niva-denmark.github.io/ambiR/reference/ambiR-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ambiR: Calculate AZTI’s Marine Biotic Index — ambiR-package","text":"Maintainer: Ciarán J. Murray cjm@niva-dk.dk (ORCID) [copyright holder] Authors: Ángel Borja aborja@azti.es (ORCID) Sarai Pouso spouso@azti.es (ORCID) Iñigo Muxika imuxika@azti.es (ORCID) Joxe Mikel Garmendia jgarmendia@azti.es (ORCID) contributors: Steen Knudsen steen.knudsen@niva-dk.dk (ORCID) [contributor]","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://niva-denmark.github.io/ambiR/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/test_data.html","id":null,"dir":"Reference","previous_headings":"","what":"AMBI test dataset — test_data","title":"AMBI test dataset — test_data","text":"Example data included AMBI tool AZTI (example_BDheader.xls).","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/test_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"AMBI test dataset — test_data","text":"","code":"test_data"},{"path":"https://niva-denmark.github.io/ambiR/reference/test_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"AMBI test dataset — test_data","text":"test dataset test_data 53 rows 4 variables: station 3 sampling sites 1, 2, 3 replicate unique samples taken site, identified , b, c species Name observed species/taxon count Number individuals","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/test_data.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"AMBI test dataset — test_data","text":"https://ambi.azti.es/download/","code":""},{"path":"https://niva-denmark.github.io/ambiR/reference/test_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"AMBI test dataset — test_data","text":"","code":"summary(test_data) #>     station       replicate           species              count        #>  Min.   :1.000   Length:53          Length:53          Min.   : 1.000   #>  1st Qu.:2.000   Class :character   Class :character   1st Qu.: 1.000   #>  Median :2.000   Mode  :character   Mode  :character   Median : 1.000   #>  Mean   :2.057                                         Mean   : 2.264   #>  3rd Qu.:2.000                                         3rd Qu.: 2.000   #>  Max.   :3.000                                         Max.   :11.000"},{"path":"https://niva-denmark.github.io/ambiR/news/index.html","id":"ambir-010","dir":"Changelog","previous_headings":"","what":"ambiR 0.1.0","title":"ambiR 0.1.0","text":"Initial CRAN submission. Includes new version AMBI species list (2025-12-05). minor corrections list supplied latest software version (2024-10-08). Five species duplicate entries: Macrophthalmus (Macrophthalmus) sulcatus Ophiuroidea Parheteromastus tenuis Proclea graffii Sabatieria elongata duplicate rows removed. Ophiuroidea, two versions different values RA, indicating whether species category can reallocated (0 , 1 Yes). version retained RA = 1. 4 species, versions groupand RA.","code":""}]
