<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Interactive mode • ambiR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Interactive mode">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ambiR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/ambiR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/background.html">The AMBI index</a></li>
    <li><a class="dropdown-item" href="../articles/interactive.html">Interactive mode</a></li>
    <li><a class="dropdown-item" href="../articles/ambi-figures.html">AMBI figures</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NIVA-Denmark/ambiR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Interactive mode</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NIVA-Denmark/ambiR/blob/main/vignettes/interactive.Rmd" class="external-link"><code>vignettes/interactive.Rmd</code></a></small>
      <div class="d-none name"><code>interactive.Rmd</code></div>
    </div>

    
    
<p>By default, the <code><a href="../reference/AMBI.html">AMBI()</a></code>function works in the same way as
many other functions you are familiar with: it is called in an
<em>unsupervised</em> manner. That is, the function is called and then
returns a set of results, or possibly an error message, without any
additional interaction with the user.</p>
<p>After checking the results, the user can check if there are any
species which were not recognised and, if necessary, make corrections to
input data before calling the function again. These steps are repeated,
as necessary, in an iterative process.</p>
<p>Users familiar with the original <code>AMBI</code>software will
recall that the process of checking species names and group assignments
is done in an <em>interactive</em> way. The ambiR package allows the
user to work in a similar way where it is possible to interact with the
function and make corrections to data before the results are generated.
Where species names in the observation data were not recognised, the
user can manually assign the species to an <code>AMBI</code> species
group.</p>
<div class="section level2">
<h2 id="test-data">Test data<a class="anchor" aria-label="anchor" href="#test-data"></a>
</h2>
<p>We create a test data set with species names and counts</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>station <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,</span>
<span>                             <span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span><span class="op">)</span>,</span>
<span>                 species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Acidostoma neglectum"</span>,</span>
<span>                             <span class="st">"Acrocirrus validus"</span>,</span>
<span>                             <span class="st">"Acteocina bullata"</span>,</span>
<span>                             <span class="st">"Austrohelice crassa"</span>,</span>
<span>                             <span class="st">"Capitella nonatoi"</span>,</span>
<span>                             <span class="st">"Watersipora subatra"</span>,</span>
<span>                             <span class="st">"Zanclea giancarloi"</span>,</span>
<span>                             <span class="st">"Zanclea sessilis"</span>,</span>
<span>                             <span class="st">"Zonorhynchus sp."</span>,</span>
<span>                             <span class="st">"Acholoe squamosa"</span>,</span>
<span>                             <span class="st">"Aglaophenia kirchenpaueri"</span>,</span>
<span>                             <span class="st">"Tricellaria sp."</span><span class="op">)</span>,</span>
<span>                 count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="instructions">Instructions<a class="anchor" aria-label="anchor" href="#instructions"></a>
</h2>
<p>To run <code><a href="../reference/AMBI.html">AMBI()</a></code> in interactive mode, use the
<code>interactive = TRUE</code> argument.</p>
<p>If any of the species names in the input data frame were not
recognised as belonging to the <code>AMBI</code> species list
<em>or</em> to a user-defined species list, if this was specified, then
a message is displayed showing the number of unrecognised species, and
giving instructions for how to proceed with assigning groups to each of
these species.</p>
<p>The first species in the list of unrecognised names will be
displayed. To proceed you should type at the console prompt:</p>
<ul>
<li><p><code>1</code>,<code>2</code>,<code>3</code>,<code>4</code> or
<code>5</code> - the species will be assigned to the selected AMBI
species groups. See also <code><a href="../articles/background.html">vignette("background")</a></code>.</p></li>
<li><p><code>0</code> - assigning Group <code>0</code> means that the
species will be inclued in the AMBI calculations and count towards the
number of <em>Not assigned</em> species.</p></li>
<li><p><code>&lt;Enter&gt;</code> - the species name will be treated as
unrecognised and will <em>not</em> be included in <code>AMBI</code>
calculations.</p></li>
<li><p><code>s</code> - a list of recognised species names from the
<code>AMBI</code> list will be displayed. These are species which appear
close to the the unrecognised species when they are sorted in
alphabetical order. 10 species names will be displayed. Typing
<code>s</code> repeatedly will display consecutive names from the
<code>AMBI</code> list, 10 at a time.</p></li>
<li><p><code>x</code> - the interactive species assignment process will
be aborted. Any species groups assigned manually up to this point will
be discarded and the AMBI calculations will continue using the default,
unsupervised, method.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="interactive-ambi-calculation">Interactive AMBI calculation<a class="anchor" aria-label="anchor" href="#interactive-ambi-calculation"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://niva-denmark.github.io/ambiR/">ambiR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/AMBI.html">AMBI</a></span><span class="op">(</span><span class="va">df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"station"</span><span class="op">)</span>, quiet<span class="op">=</span><span class="cn">F</span>, interactive <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Assigning unrecognised species ──────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • 7 species names were not recognised. These will now be displayed, one at a</span></span>
<span><span class="co">#&gt; time.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • For each species, you can assign it to one of the five AMBI categories (I,</span></span>
<span><span class="co">#&gt; II, III, IV, V). Do this by entering an integer value from 1 to 5.</span></span>
<span><span class="co">#&gt; Alternatively, you can assign a value of 0. This indicates that the species</span></span>
<span><span class="co">#&gt; name is recognised but it is not possible to assign it to one of the five</span></span>
<span><span class="co">#&gt; categories.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • If Enter is pressed, without providing a value, no change will be made. The</span></span>
<span><span class="co">#&gt; species name in question will be treated as unrecognised.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Enter s at the prompt to see a list of similar species names and their</span></span>
<span><span class="co">#&gt; corresponding AMBI categories.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Enter x to abort the interactive species selection. Any entries made up to</span></span>
<span><span class="co">#&gt; that point will be discarded. All 7 species will be treated as unrecognised.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1 Acholoe squamosa ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>Typing <code>s</code> will show species names which are close to the
unrecognised species when arranged in alphabetical order.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">s</span></span>
<span><span class="co">#&gt; • Achelous ordwayi                                 (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma hancocki                              (Group 2)</span></span>
<span><span class="co">#&gt; • Acidostoma neglectum                             (Group 0)</span></span>
<span><span class="co">#&gt; • Acidostoma nodiferum                             (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma obesum                                (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma sarsi                                 (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma sp.                                   (Group 1)</span></span>
<span><span class="co">#&gt; • Acila castrensis                                 (Group 2)</span></span>
<span><span class="co">#&gt; • Acila insignis                                   (Group 2)</span></span>
<span><span class="co">#&gt; • Aclis gulsonae                                   (Group 1)</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>There were no similar species names which might give us a clue about
this species. In this case, we are satisfied that the name is a valid
species name<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;&lt;a href="https://www.marinespecies.org/aphia.php?p=taxdetails&amp;amp;id=146474#" class="external-link uri"&gt;https://www.marinespecies.org/aphia.php?p=taxdetails&amp;amp;id=146474#&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a> but we are unsure which group the species
should be assigned to, so we assign group <code>0</code>.</p>
<p>Assigning group <code>0</code> means that the species will be
included in the count of <code>Not assigned</code> species when
calculating the <code>AMBI</code> index. If we typed <code>Enter</code>
the species would be ignored and not included in the <code>AMBI</code>
calculations.</p>
<p>A message is displayed confirming our selection
(<code>Not assigned</code>) and then we are asked to consider the next
unrecognised species name, <em>Aglaophenia kirchenpaueri</em>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fl">0</span></span>
<span><span class="co">#&gt; ✔  Acholoe squamosa - Not assigned</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 2 Aglaophenia kirchenpaueri ──</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>We type <code>s</code> to see similar names:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">s</span></span>
<span><span class="co">#&gt; • Aglaophamus verrilli                             (Group 2)</span></span>
<span><span class="co">#&gt; • Aglaophenia acacia                               (Group 0)</span></span>
<span><span class="co">#&gt; • Aglaophenia pluma                                (Group 0)</span></span>
<span><span class="co">#&gt; • Agnezia septentrionalis                          (Group 2)</span></span>
<span><span class="co">#&gt; • Aidanosagitta crassa                             (Group 1)</span></span>
<span><span class="co">#&gt; • Aiptasia diaphana                                (Group 3)</span></span>
<span><span class="co">#&gt; • Aiptasia mutabilis                               (Group 3)</span></span>
<span><span class="co">#&gt; • Akanthophoreus gracilis                          (Group 1)</span></span>
<span><span class="co">#&gt; • Akera bullata                                    (Group 1)</span></span>
<span><span class="co">#&gt; • Akera sp.                                        (Group 1)</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>In this case we can see two species belonging to the same genus,
<em>Aglaophenia</em>. They are both assigned to group <code>0</code>
(<code>Not assigned</code>) so we could make the assumption that our
unrecognised species should be assigned to the same group.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fl">0</span></span>
<span><span class="co">#&gt; ✔ Aglaophenia kirchenpaueri - Not assigned</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ── 3 Tricellaria sp. ──</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>This process is repeated for each unrecognised species name.</p>
</div>
<div class="section level2">
<h2 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h2>
<p><code><a href="../reference/AMBI.html">AMBI()</a></code> returns a list of three dataframes, including
<code>matched</code>. This dataframe shows which groups species have
been assigned to and after interactive species matching, it will include
the column <code>source</code>. An <em>‘I’</em> in this column indicates
that the group was assigned interactively.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="sc">$</span>matched</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt;  station                   species           species_matched count group source RA</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt;  1        1      Acidostoma neglectum      Acidostoma neglectum     2     0   &lt;NA&gt;  0</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt;  2        1        Acrocirrus validus        Acrocirrus validus     4     4   &lt;NA&gt;  0</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt;  3        1         Acteocina bullata         Acteocina bullata     5     1   &lt;NA&gt;  0</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt;  4        1       Austrohelice crassa       Austrohelice crassa     3     5   &lt;NA&gt;  0</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt;  5        1         Capitella nonatoi         Capitella nonatoi     7     5   &lt;NA&gt;  0</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt;  6        1       Watersipora subatra       Watersipora subatra     2     0      I NA</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt;  7        2        Zanclea giancarloi        Zanclea giancarloi     4     0      I NA</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt;  8        2          Zanclea sessilis          Zanclea sessilis     5     0      I NA</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#&gt;  9        2          Zonorhynchus sp.          Zonorhynchus sp.     3     0      I NA</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt;  10       2          Acholoe squamosa          Acholoe squamosa     7     0      I NA</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">#&gt;  11       2 Aglaophenia kirchenpaueri Aglaophenia kirchenpaueri     2     0      I NA</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="co">#&gt;  12       2           Tricellaria sp.           Tricellaria sp.     3     3      I NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="aborting-interactive-mode">Aborting interactive mode<a class="anchor" aria-label="anchor" href="#aborting-interactive-mode"></a>
</h2>
<p>Typing <code>x</code> at any point in the interactive species
assignment process will abort the interactive process. The following
message will be displayed:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>  x</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  </span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="sc">&gt;</span> <span class="sc">!</span> interactive species assignment cancelled</span></code></pre></div>
<p>Any species groups assigned manually up to this point will be
discarded and the AMBI calculations will proceed using the default,
unsupervised, method.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ciarán J. Murray, Ángel Borja, Sarai Pouso, Iñigo Muxika, Joxe Mikel Garmendia, <a href="https://www.ges4seas.eu" class="external-link"><img src="https://www.ges4seas.eu/wp-content/uploads/2022/07/Ges4Seas_logo3.png" width="140" alt="GES4SEAS logo"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
