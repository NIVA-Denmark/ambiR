<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Interactive mode • ambiR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Interactive mode">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ambiR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/ambiR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/about-AMBI.html">The AMBI index</a></li>
    <li><a class="dropdown-item" href="../articles/interactive.html">Interactive mode</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/niva-denmark/ambiR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Interactive mode</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/niva-denmark/ambiR/blob/main/vignettes/interactive.Rmd" class="external-link"><code>vignettes/interactive.Rmd</code></a></small>
      <div class="d-none name"><code>interactive.Rmd</code></div>
    </div>

    
    
<p>By default, the <code><a href="../reference/AMBI.html">AMBI()</a></code>function works in the same way as
many (<em>most?</em>) other functions you are familiar with: it is
called in an <em>unsupervised</em> manner. That is, the function is
called and then, hopefully, returns a set of results without any
additional interaction.</p>
<p>After checking the results, we can check if there are any species
which were not recognized and, if necessary, call the function again, in
an iterative process.</p>
<p>However, it is also possible to call the function in an
<em>interactive</em> mode. This is similar to the way the original
<code>AMBI</code>software functions, in that it is possible to interact
with the function before the results are generated. Where species names
in the observation data were not recognized, you can manually assign the
species to an <code>AMBI</code> species group.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://niva-denmark.github.io/ambiR/">ambiR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="test-data">Test data<a class="anchor" aria-label="anchor" href="#test-data"></a>
</h2>
<p>We create a test data set with species names and counts</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>station <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,<span class="st">"1"</span>,</span>
<span>                             <span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span>,<span class="st">"2"</span><span class="op">)</span>,</span>
<span>                 species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Acidostoma neglectum"</span>,</span>
<span>                             <span class="st">"Acrocirrus validus"</span>,</span>
<span>                             <span class="st">"Acteocina bullata"</span>,</span>
<span>                             <span class="st">"Austrohelice crassa"</span>,</span>
<span>                             <span class="st">"Capitella nonatoi"</span>,</span>
<span>                             <span class="st">"Watersipora subatra"</span>,</span>
<span>                             <span class="st">"Zanclea giancarloi"</span>,</span>
<span>                             <span class="st">"Zanclea sessilis"</span>,</span>
<span>                             <span class="st">"Zonorhynchus sp."</span>,</span>
<span>                             <span class="st">"Acholoe squamosa"</span>,</span>
<span>                             <span class="st">"Aglaophenia kirchenpaueri"</span>,</span>
<span>                             <span class="st">"Tricellaria sp."</span><span class="op">)</span>,</span>
<span>                 count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="instructions">Instructions<a class="anchor" aria-label="anchor" href="#instructions"></a>
</h2>
<p>The <code><a href="../reference/AMBI.html">AMBI()</a></code> function is called using the
<code>interactive = TRUE</code> argument.</p>
<p>If any of the species names in the input data frame were not
recognized as belonging to the <code>AMBI</code> species list
<em>or</em> to a user-defined species list, if this was specified, then
a message is displayed showing the number of unrecognized species, and
giving instructions for how to proceed with assigning groups to each of
these species.</p>
<p>The first species in the list of unrecognized names will be
displayed. To proceed you should type at the console prompt:</p>
<ul>
<li><p><code>1</code>,<code>2</code>,<code>3</code>,<code>4</code> or
<code>5</code> - the species will be assigned to the selected (<a href="./about-AMBI.html#species-groups">AMBI species
groups</a>)</p></li>
<li><p><code>0</code> - assigning Group <code>0</code> means that the
species will be inclued in the AMBI calculations and count towards the
number of <em>Not assigned</em> species.</p></li>
<li><p><code>Enter</code> - the species name will be treated as
unrecognized and will <em>not</em> be included in <code>AMBI</code>
calculations.</p></li>
<li><p><code>s</code> - a list of recognized species names from the
<code>AMBI</code> list will be displayed. These are species which appear
close to the the unrecognized species when they are sorted in
alphabetical order. 10 species names will be displayed. Typing
<code>s</code> repeatedly will display consecutive names from the
<code>AMBI</code> list, 10 at a time.</p></li>
<li><p><code>x</code> - the interactive species assignment process will
be aborted. Any species groups assigned manually up to this point will
be discarded and the AMBI calculations will continue using the default,
unsupervised, method.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="interactive-ambi-calculation">Interactive AMBI calculation<a class="anchor" aria-label="anchor" href="#interactive-ambi-calculation"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/AMBI.html">AMBI</a></span><span class="op">(</span><span class="va">df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"station"</span><span class="op">)</span>, quiet<span class="op">=</span><span class="cn">F</span>, interactive <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Assigning unrecognized species ──────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • 7 species names were not recognized. These will now be displayed, one at a</span></span>
<span><span class="co">#&gt; time.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • For each species, you can assign it to one of the five AMBI categories (I,</span></span>
<span><span class="co">#&gt; II, III, IV, V). Do this by entering an integer value from 1 to 5.</span></span>
<span><span class="co">#&gt; Alternatively, you can assign a value of 0. This indicates that the species</span></span>
<span><span class="co">#&gt; name is recognized but it is not possible to assign it to one of the five</span></span>
<span><span class="co">#&gt; categories.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • If Enter is pressed, without providing a value, no change will be made. The</span></span>
<span><span class="co">#&gt; species name in question will be treated as unrecognized.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Enter s at the prompt to see a list of similar species names and their</span></span>
<span><span class="co">#&gt; corresponding AMBI categories.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Enter x to abort the interactive species selection. Any entries made up to</span></span>
<span><span class="co">#&gt; that point will be discarded. All 7 species will be treated as unrecognized.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1 Acholoe squamosa ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>Typing <code>s</code> will show species names which are close to the
unrecognized species when arranged in alphabetical order.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span></span>
<span></span>
<span><span class="co">#&gt; • Achelous ordwayi                                 (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma hancocki                              (Group 2)</span></span>
<span><span class="co">#&gt; • Acidostoma neglectum                             (Group 0)</span></span>
<span><span class="co">#&gt; • Acidostoma nodiferum                             (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma obesum                                (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma sarsi                                 (Group 1)</span></span>
<span><span class="co">#&gt; • Acidostoma sp.                                   (Group 1)</span></span>
<span><span class="co">#&gt; • Acila castrensis                                 (Group 2)</span></span>
<span><span class="co">#&gt; • Acila insignis                                   (Group 2)</span></span>
<span><span class="co">#&gt; • Aclis gulsonae                                   (Group 1)</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>There were no similar species names which might give us a clue about
this species. In this case, we are satisfied that the name is a valid
species name<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;&lt;a href="https://www.marinespecies.org/aphia.php?p=taxdetails&amp;amp;id=146474" class="external-link uri"&gt;https://www.marinespecies.org/aphia.php?p=taxdetails&amp;amp;id=146474&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a> but we are unsure which group the species
should be assigned to, so we assign group <code>0</code>.</p>
<p>Assigning group <code>0</code> means that the species will be
included in the count of <code>Not assigned</code> species when
calculating the <code>AMBI</code> index. If we typed <code>Enter</code>
the species would be ignored and not included in the <code>AMBI</code>
calculations.</p>
<p>A message is displayed confirming our selection
(<code>Not assigned</code>) and then we are asked to consider the next
unrecognized species name, <em>Aglaophenia kirchenpaueri</em>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">0</span></span>
<span></span>
<span><span class="co">#&gt; ✔ Acholoe squamosa - Not assigned</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 2 Aglaophenia kirchenpaueri ──</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>We type <code>s</code> to see similar names:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span></span>
<span></span>
<span><span class="co">#&gt; • Aglaophamus verrilli                             (Group 2)</span></span>
<span><span class="co">#&gt; • Aglaophenia acacia                               (Group 0)</span></span>
<span><span class="co">#&gt; • Aglaophenia pluma                                (Group 0)</span></span>
<span><span class="co">#&gt; • Agnezia septentrionalis                          (Group 2)</span></span>
<span><span class="co">#&gt; • Aidanosagitta crassa                             (Group 1)</span></span>
<span><span class="co">#&gt; • Aiptasia diaphana                                (Group 3)</span></span>
<span><span class="co">#&gt; • Aiptasia mutabilis                               (Group 3)</span></span>
<span><span class="co">#&gt; • Akanthophoreus gracilis                          (Group 1)</span></span>
<span><span class="co">#&gt; • Akera bullata                                    (Group 1)</span></span>
<span><span class="co">#&gt; • Akera sp.                                        (Group 1)</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>In this case we can see two species belonging to the same genus,
<em>Aglaophenia</em>. They are both assigned to group <code>0</code>
(<code>Not assigned</code>) so we could make the assumption that our
unrecognized species should be assigned to the same group.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">0</span></span>
<span></span>
<span><span class="co">#&gt; ✔ Aglaophenia kirchenpaueri - Not assigned</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ── 3 Tricellaria sp. ──</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ℹ enter an integer value from 0 to 5 or press Enter to skip. s - see similar</span></span>
<span><span class="co">#&gt;  names. x - abort interactive assignment.</span></span></code></pre></div>
<p>This process is repeated for each unrecognized species name.</p>
</div>
<div class="section level2">
<h2 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h2>
<p>The <code><a href="../reference/AMBI.html">AMBI()</a></code> function returns a list of three dataframes,
including <code>matched</code>. This dataframe shows which groups
species have been assigned to and after interactive species matching, it
will include the column <code>source</code>. An <em>‘I’</em> in this
column indicates that the group was assigned interactively.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="sc">$</span>matched</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>   station                   species           species_matched count group source RA</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="dv">1</span>        <span class="dv">1</span>      Acidostoma neglectum      Acidostoma neglectum     <span class="dv">2</span>     <span class="dv">0</span>   <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">0</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="dv">2</span>        <span class="dv">1</span>        Acrocirrus validus        Acrocirrus validus     <span class="dv">4</span>     <span class="dv">4</span>   <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">0</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="dv">3</span>        <span class="dv">1</span>         Acteocina bullata         Acteocina bullata     <span class="dv">5</span>     <span class="dv">1</span>   <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">0</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="dv">4</span>        <span class="dv">1</span>       Austrohelice crassa       Austrohelice crassa     <span class="dv">3</span>     <span class="dv">5</span>   <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">0</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="dv">5</span>        <span class="dv">1</span>         Capitella nonatoi         Capitella nonatoi     <span class="dv">7</span>     <span class="dv">5</span>   <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">0</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="dv">6</span>        <span class="dv">1</span>       Watersipora subatra       Watersipora subatra     <span class="dv">2</span>     <span class="dv">0</span>      I <span class="cn">NA</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="dv">7</span>        <span class="dv">2</span>        Zanclea giancarloi        Zanclea giancarloi     <span class="dv">4</span>     <span class="dv">0</span>      I <span class="cn">NA</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="dv">8</span>        <span class="dv">2</span>          Zanclea sessilis          Zanclea sessilis     <span class="dv">5</span>     <span class="dv">0</span>      I <span class="cn">NA</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="dv">9</span>        <span class="dv">2</span>          Zonorhynchus sp.          Zonorhynchus sp.     <span class="dv">3</span>     <span class="dv">0</span>      I <span class="cn">NA</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="dv">10</span>       <span class="dv">2</span>          Acholoe squamosa          Acholoe squamosa     <span class="dv">7</span>     <span class="dv">0</span>      I <span class="cn">NA</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="dv">11</span>       <span class="dv">2</span> Aglaophenia kirchenpaueri Aglaophenia kirchenpaueri     <span class="dv">2</span>     <span class="dv">0</span>      I <span class="cn">NA</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="dv">12</span>       <span class="dv">2</span>           Tricellaria sp.           Tricellaria sp.     <span class="dv">3</span>     <span class="dv">3</span>      I <span class="cn">NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="aborting-interactive-mode">Aborting interactive mode<a class="anchor" aria-label="anchor" href="#aborting-interactive-mode"></a>
</h2>
<p>If, at any point in the interactive species assignment process we
type <code>x</code> then the interactive process will be aborted. You
will see the following message</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span>
<span></span>
<span><span class="co">#&gt; ! interactive species assignment cancelled</span></span></code></pre></div>
<p>Any species groups assigned manually up to this point will be
discarded and the AMBI calculations will proceed using the default,
unsupervised, method.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ciarán J. Murray, Ángel Borja, Sarai Pouso, Iñigo Muxika, Joxe Mikel Garmendia, Jørgen L. S. Hansen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
